<!DOCTYPE html>
<!-- START: inst/pkgdown/templates/layout.html --><!-- Generated by pkgdown: do not edit by hand --><html lang="en" data-bs-theme="auto"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><title>ESMValTool Tutorial: Debugging</title><meta name="viewport" content="width=device-width, initial-scale=1"><script src="assets/themetoggle.js"></script><link rel="stylesheet" type="text/css" href="assets/styles.css"><script src="assets/scripts.js" type="text/javascript"></script><!-- mathjax --><script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      config: ["MMLorHTML.js"],
      jax: ["input/TeX","input/MathML","output/HTML-CSS","output/NativeMML", "output/PreviewHTML"],
      extensions: ["tex2jax.js","mml2jax.js","MathMenu.js","MathZoom.js", "fast-preview.js", "AssistiveMML.js", "a11y/accessibility-menu.js"],
      TeX: {
        extensions: ["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"]
      },
      tex2jax: {
        inlineMath: [['\\(', '\\)']],
        displayMath: [ ['$$','$$'], ['\\[', '\\]'] ],
        processEscapes: true
      }
    });
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><!-- Responsive Favicon for The Carpentries --><link rel="apple-touch-icon" sizes="180x180" href="favicons/incubator/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="favicons/incubator/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="favicons/incubator/favicon-16x16.png"><link rel="manifest" href="favicons/incubator/site.webmanifest"><link rel="mask-icon" href="favicons/incubator/safari-pinned-tab.svg" color="#5bbad5"><meta name="msapplication-TileColor" content="#da532c"><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="black"></head><body>
    <header id="top" class="navbar navbar-expand-md top-nav incubator"><svg xmlns="http://www.w3.org/2000/svg" class="d-none"><symbol id="check2" viewbox="0 0 16 16"><path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"></path></symbol><symbol id="circle-half" viewbox="0 0 16 16"><path d="M8 15A7 7 0 1 0 8 1v14zm0 1A8 8 0 1 1 8 0a8 8 0 0 1 0 16z"></path></symbol><symbol id="moon-stars-fill" viewbox="0 0 16 16"><path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"></path><path d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097l.387-1.162zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"></path></symbol><symbol id="sun-fill" viewbox="0 0 16 16"><path d="M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"></path></symbol></svg><a class="visually-hidden-focusable skip-link" href="#main-content">Skip to main content</a>
  <div class="container-fluid top-nav-container">
    <div class="col-md-8">
      <div class="large-logo">
        <img id="incubator-logo" alt="Lesson Description" src="assets/images/incubator-logo.svg"><span class="badge text-bg-danger">
          <abbr title="This lesson is in the pre-alpha phase, which means that it is in early development, but has not yet been taught.">
            <a href="https://cdh.carpentries.org/the-lesson-life-cycle.html#early-development-pre-alpha-through-alpha" class="external-link alert-link">
              <i aria-hidden="true" class="icon" data-feather="alert-octagon" style="border-radius: 5px"></i>
              Pre-Alpha
            </a>
            <span class="visually-hidden">This lesson is in the pre-alpha phase, which means that it is in early development, but has not yet been taught.</span>
          </abbr>
        </span>

      </div>
    </div>
    <div class="selector-container">
      <div id="theme-selector">
        <li class="nav-item dropdown" id="theme-button-list">
          <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
            <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="bd-theme-text"><li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                Light
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                Dark
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                Auto
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
          </ul></li>
      </div>

      <div class="dropdown" id="instructor-dropdown">
        <button class="btn btn-secondary dropdown-toggle bordered-button" type="button" id="dropdownMenu1" data-bs-toggle="dropdown" aria-expanded="false">
          <i aria-hidden="true" class="icon" data-feather="eye"></i> Learner View <i data-feather="chevron-down"></i>
        </button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1"><li><button class="dropdown-item" type="button" onclick="window.location.href='instructor/10-debugging.html';">Instructor View</button></li>
        </ul></div>
    </div>
  </div>
  <hr></header><nav class="navbar navbar-expand-xl bottom-nav incubator" aria-label="Main Navigation"><div class="container-fluid nav-container">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle Navigation">
      <span class="navbar-toggler-icon"></span>
      <span class="menu-title">Menu</span>
    </button>
    <div class="nav-logo">
      <img class="small-logo" alt="Lesson Description" src="assets/images/incubator-logo-sm.svg"></div>
    <div class="lesson-title-md">
      ESMValTool Tutorial
    </div>
    <div class="search-icon-sm">
      <!-- TODO: do not show until we have search
        <i role="img" aria-label="Search the All In One page" data-feather="search"></i>
      -->
    </div>
    <div class="desktop-nav">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0"><li class="nav-item">
          <span class="lesson-title">
            ESMValTool Tutorial
          </span>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="key-points.html">Key Points</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="reference.html#glossary">Glossary</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="profiles.html">Learner Profiles</a>
        </li>
        <li class="nav-item dropdown">
          <button class="nav-link dropdown-toggle" id="navbarDropdown" data-bs-toggle="dropdown" aria-expanded="false">
            More <i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdown"><li><a class="dropdown-item" href="reference.html">Reference</a></li>
          </ul></li>
      </ul></div>
    <!--
    <form class="d-flex col-md-2 search-form">
      <fieldset disabled>
      <input class="form-control me-2 searchbox" type="search" placeholder="" aria-label="">
        <button class="btn btn-outline-success tablet-search-button"  type="submit">
          <i class="search-icon" data-feather="search" role="img" aria-label="Search the All In One page"></i>
        </button>
      </fieldset>
    </form>
    -->
    <a id="search-button" class="btn btn-primary" href="aio.html" role="button" aria-label="Search the All In One page">Search the All In One page</a>
  </div><!--/div.container-fluid -->
</nav><div class="col-md-12 mobile-title">
  ESMValTool Tutorial
</div>

<aside class="col-md-12 lesson-progress"><div style="width: 87%" class="percentage">
    87%
  </div>
  <div class="progress incubator">
    <div class="progress-bar incubator" role="progressbar" style="width: 87%" aria-valuenow="87" aria-label="Lesson Progress" aria-valuemin="0" aria-valuemax="100">
    </div>
  </div>
</aside><div class="container">
      <div class="row">
        <!-- START: inst/pkgdown/templates/navbar.html -->
<div id="sidebar-col" class="col-lg-4">
  <div id="sidebar" class="sidebar">
      <nav aria-labelledby="flush-headingEleven"><button role="button" aria-label="close menu" alt="close menu" aria-expanded="true" aria-controls="sidebar" class="collapse-toggle" data-collapse="Collapse " data-episodes="Episodes ">
          <i class="search-icon" data-feather="x" role="img"></i>
        </button>
        <div class="sidebar-inner">
          <div class="row mobile-row" id="theme-row-mobile">
            <div class="col" id="theme-selector">
              <li class="nav-item dropdown" id="theme-button-list">
                <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
                  <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><span class="d-lg-none ms-1" id="bd-theme-text">Toggle Theme</span>
                </button>
                <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="bd-theme-text"><li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                      Light
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                      Dark
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                      <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                      Auto
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                </ul></li>
            </div>
          </div>
          <div class="row mobile-row">
            <div class="col">
              <div class="sidenav-view-selector">
                <div class="accordion accordion-flush" id="accordionFlush9">
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="flush-headingNine">
                      <button class="accordion-button collapsed" id="instructor" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseNine" aria-expanded="false" aria-controls="flush-collapseNine">
                        <i id="eye" aria-hidden="true" class="icon" data-feather="eye"></i> Learner View
                      </button>
                    </h2>
                    <div id="flush-collapseNine" class="accordion-collapse collapse" aria-labelledby="flush-headingNine" data-bs-parent="#accordionFlush2">
                      <div class="accordion-body">
                        <a href="instructor/10-debugging.html">Instructor View</a>
                      </div>
                    </div>
                  </div><!--/div.accordion-item-->
                </div><!--/div.accordion-flush-->
              </div><!--div.sidenav-view-selector -->
            </div><!--/div.col -->

            <hr></div><!--/div.mobile-row -->

          <div class="accordion accordion-flush" id="accordionFlush11">
            <div class="accordion-item">

              <button id="chapters" class="accordion-button show" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseEleven" aria-expanded="false" aria-controls="flush-collapseEleven">
                <h2 class="accordion-header chapters" id="flush-headingEleven">
                  EPISODES
                </h2>
              </button>
              <div id="flush-collapseEleven" class="accordion-collapse show collapse" aria-labelledby="flush-headingEleven" data-bs-parent="#accordionFlush11">

                <div class="accordion-body">
                  <div class="accordion accordion-flush" id="accordionFlush1">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading1">
        <a href="index.html">Summary and Setup</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush2">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading2">
        <a href="00-introduction.html">1. Introduction</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush3">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading3">
        <a href="01-quickstart.html">2. Quickstart guide</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush4">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading4">
        <a href="02-installation.html">3. Installation</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush5">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading5">
        <a href="03-configuration.html">4. Configuration</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush6">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading6">
        <a href="04-recipe.html">5. Running your first recipe</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush7">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading7">
        <a href="05-conclusions.html">6. Conclusion of the basic tutorial</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush8">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading8">
        <a href="06-preprocessor.html">7. Writing your own recipe</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush9">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading9">
        <a href="07-development-setup.html">8. Development and contribution</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush10">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading10">
        <a href="08-diagnostics.html">9. Writing your own diagnostic script</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush11">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading11">
        <a href="09-cmorization.html">10. CMORization: adding new datasets to ESMValTool</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlushcurrent">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-headingcurrent">
      <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapsecurrent" aria-expanded="true" aria-controls="flush-collapsecurrent">
        <span class="visually-hidden">Current Chapter</span>
        <span class="current-chapter">
        11. Debugging
        </span>
      </button>
    </div><!--/div.accordion-header-->

    <div id="flush-collapsecurrent" class="accordion-collapse collapse show" aria-labelledby="flush-headingcurrent" data-bs-parent="#accordionFlushcurrent">
      <div class="accordion-body">
        <ul><li><a href="#log-files">Log files</a></li>
<li><a href="#keys-and-values-in-recipe-settings">Keys and values in recipe settings</a></li>
<li><a href="#check-pre-processed-data">Check pre-processed data</a></li>
<li><a href="#check-diagnostic-script-path">Check diagnostic script path</a></li>
        </ul></div><!--/div.accordion-body-->
    </div><!--/div.accordion-collapse-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

                </div>
              </div>
            </div>

            <hr class="half-width"><div class="accordion accordion-flush lesson-resources" id="accordionFlush12">
              <div class="accordion-item">
                <h2 class="accordion-header" id="flush-headingTwelve">
                  <button class="accordion-button collapsed" id="lesson-resources" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTwelve" aria-expanded="false" aria-controls="flush-collapseTwelve">
                    RESOURCES
                  </button>
                </h2>
                <div id="flush-collapseTwelve" class="accordion-collapse collapse" aria-labelledby="flush-headingTwelve" data-bs-parent="#accordionFlush12">
                  <div class="accordion-body">
                    <ul><li>
                        <a href="key-points.html">Key Points</a>
                      </li>
                      <li>
                        <a href="reference.html#glossary">Glossary</a>
                      </li>
                      <li>
                        <a href="profiles.html">Learner Profiles</a>
                      </li>
                      <li><a href="reference.html">Reference</a></li>
                    </ul></div>
                </div>
              </div>
            </div>
            <hr class="half-width lesson-resources"><a href="aio.html">See all in one page</a>


            <hr class="d-none d-sm-block d-md-none"><div class="d-grid gap-1">

            </div>
          </div><!-- /div.accordion -->
        </div><!-- /div.sidebar-inner -->
      </nav></div><!-- /div.sidebar -->
  </div><!-- /div.sidebar-col -->
<!-- END:   inst/pkgdown/templates/navbar.html-->

        <!-- START: inst/pkgdown/templates/content-instructor.html -->
  <div class="col-xl-8 col-lg-12 primary-content">
    <nav class="lesson-content mx-md-4" aria-label="Previous and Next Chapter"><!-- content for small screens --><div class="d-block d-sm-block d-md-none">
        <a class="chapter-link" href="09-cmorization.html"><i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>Previous</a>
        <a class="chapter-link float-end" href="index.html">Next<i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i></a>
      </div>
      <!-- content for large screens -->
      <div class="d-none d-sm-none d-md-block">
        <a class="chapter-link" href="09-cmorization.html" rel="prev">
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>
          Previous: CMORization: adding
        </a>
        <a class="chapter-link float-end" href="index.html" rel="next">
          Home
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i>
        </a>
      </div>
      <hr></nav><main id="main-content" class="main-content"><div class="container lesson-content">
        <h1>Debugging</h1>
        <p>Last updated on 2024-11-21 |

        <a href="https://github.com/ehogan/ESMValTool_Tutorial/edit/main/episodes/10-debugging.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>



        <div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>

        

<p>Every user encounters errors. Once you know why you get certain types
of errors, they become much easier to fix. The good news is that
ESMValTool creates a record of the output messages and stores them in
log files. They can be used for debugging or monitoring the process.
This lesson helps you understand the different types of errors and when
you are likely to encounter them.</p>
<section><h2 class="section-heading" id="log-files">Log files<a class="anchor" aria-label="anchor" href="#log-files"></a></h2>
<hr class="half-width"><p>Each time we run ESMValTool, it will produce a new output directory.
This directory should contain the <code>run</code> folder that is
automatically generated by ESMValTool. To examine this, we run a
<code>recipe_python.yml</code> that can be found in lesson <a href="%7B%7B%20page.root%20%7D%7D%7B%%20link%20_episodes/04-recipe.md%20%%7D">Running
your first recipe</a>. Check lesson <a href="%7B%7B%20page.root%20%7D%7D%7B%%20link%20_episodes/03-configuration.md%20%%7D">Configuration</a>
on how to set paths.</p>
<p>In a new terminal, run the recipe:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a>  <span class="bu">cd</span> esmvaltool_tutorial</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a>  <span class="ex">esmvaltool</span> run examples/recipe_python.yml</span></code></pre>
</div>
<pre><code>esmvaltool: command not found</code></pre>
<p>{: .error}</p>
<p>ESMValTool encounters this error because the conda environment
<code>esmvaltool</code> has not been activated. To fix the error, before
running the recipe, activate the environment:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="ex">conda</span> activate esmvaltool</span></code></pre>
</div>
<blockquote>
<h2 id="conda-environment">conda environment</h2>
<p>More information about the conda environment can be found at <a href="%7B%7B%20page.root%20%7D%7D%7B%%20link%20_episodes/02-installation.md%20%%7D">Installation</a>.
{: .callout}</p>
</blockquote>
<p>Let’s list the files in the <code>run</code> directory:</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a>  <span class="fu">ls</span> esmvaltool_output/recipe_python_#_#/run</span></code></pre>
</div>
<pre><code>main_log_debug.txt  main_log.txt  map  recipe_python.yml  resource_usage.txt
timeseries</code></pre>
<p>{: .output}</p>
<p>In the <code>main_log_debug.txt</code> and <code>main_log.txt</code>,
ESMValTool writes the output messages, warnings and possible errors that
might happen during pre-processings. To inspect them, we can look inside
the files. For example:</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a>  <span class="fu">cat</span> esmvaltool_output/recipe_python_#_#/run/main_log.txt</span></code></pre>
</div>
<p>Now, let’s have a look inside the folder
<code>timeseries/script1</code>:</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a>  <span class="fu">ls</span> esmvaltool_output/recipe_python_#_#/run/timeseries/script1/</span></code></pre>
</div>
<pre><code>diagnostic_provenance.yml log.txt  resource_usage.txt  settings.yml</code></pre>
<p>{: .output}</p>
<p>In the <code>log.txt</code>, ESMValTool writes the output messages,
warnings and possible errors that are related to the diagnostic
script.</p>
<p>If you encounter an error and don’t know what it means, it is
important to read the log information. Sometimes knowing where the error
occurred is enough to fix it, even if you don’t entirely understand the
message. However, note that you may not always be able to find the error
or fix it. In that case, ESMValTool community helps you figure out what
went wrong.</p>
<blockquote>
<h2 id="different-log-files">Different log files</h2>
<p>In the <code>run</code> directory, there are two log files
<code>main_log_debug.txt</code> and <code>main_log.txt</code>. What are
their differences?</p>
<blockquote>
<h2 id="solution">Solution</h2>
<p>The <code>main_log_debug.txt</code> contains the output messages from
the pre-processor whereas the <code>main_log.txt</code> shows general
errors and warnings that might happen in running the recipe and
diagnostics script. {: .solution} {: .challenge}</p>
</blockquote>
</blockquote>
<p>Let’s change some settings in the recipe to run a regional
pre-processor. We use a text editor called <code>nano</code> to open the
recipe file:</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a>  <span class="fu">nano</span> recipe_python.yml</span></code></pre>
</div>
<blockquote>
<h2 id="text-editor-side-note">Text editor side note</h2>
<p>No matter what editor you use, you will need to know where it
searches for and saves files. If you start it from the shell, it will
(probably) use your current working directory as its default location.
We use <code>nano</code> in examples here because it is one of the least
complex text editors. Press <kbd>ctrl</kbd> + <kbd>O</kbd> to save the
file, and then <kbd>ctrl</kbd> + <kbd>X</kbd> to exit <code>nano</code>.
{: .callout}</p>
</blockquote>
<blockquote>
<h2 id="see-the-recipe_python.yml">See the recipe_python.yml</h2>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">YAML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode yaml" tabindex="0"><code class="sourceCode yaml"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="co"># ESMValTool</span></span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a><span class="co"># recipe_python.yml</span></span>
<span id="cb10-3"><a href="#cb10-3" tabindex="-1"></a><span class="pp">---</span></span>
<span id="cb10-4"><a href="#cb10-4" tabindex="-1"></a><span class="co"># See https://docs.esmvaltool.org/en/latest/recipes/recipe_examples.html</span></span>
<span id="cb10-5"><a href="#cb10-5" tabindex="-1"></a><span class="co"># for a description of this recipe.</span></span>
<span id="cb10-6"><a href="#cb10-6" tabindex="-1"></a></span>
<span id="cb10-7"><a href="#cb10-7" tabindex="-1"></a><span class="co"># See https://docs.esmvaltool.org/projects/esmvalcore/en/latest/recipe/overview.html</span></span>
<span id="cb10-8"><a href="#cb10-8" tabindex="-1"></a><span class="co"># for a description of the recipe format.</span></span>
<span id="cb10-9"><a href="#cb10-9" tabindex="-1"></a><span class="pp">---</span></span>
<span id="cb10-10"><a href="#cb10-10" tabindex="-1"></a><span class="fu">documentation</span><span class="kw">:</span></span>
<span id="cb10-11"><a href="#cb10-11" tabindex="-1"></a><span class="fu">  description</span><span class="kw">: </span><span class="ch">|</span></span>
<span id="cb10-12"><a href="#cb10-12" tabindex="-1"></a>    Example recipe that plots a map and timeseries of temperature.</span>
<span id="cb10-13"><a href="#cb10-13" tabindex="-1"></a></span>
<span id="cb10-14"><a href="#cb10-14" tabindex="-1"></a><span class="at">  </span><span class="fu">title</span><span class="kw">:</span><span class="at"> Recipe that runs an example diagnostic written in Python.</span></span>
<span id="cb10-15"><a href="#cb10-15" tabindex="-1"></a></span>
<span id="cb10-16"><a href="#cb10-16" tabindex="-1"></a><span class="at">  </span><span class="fu">authors</span><span class="kw">:</span></span>
<span id="cb10-17"><a href="#cb10-17" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> andela_bouwe</span></span>
<span id="cb10-18"><a href="#cb10-18" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> righi_mattia</span></span>
<span id="cb10-19"><a href="#cb10-19" tabindex="-1"></a></span>
<span id="cb10-20"><a href="#cb10-20" tabindex="-1"></a><span class="at">  </span><span class="fu">maintainer</span><span class="kw">:</span></span>
<span id="cb10-21"><a href="#cb10-21" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> schlund_manuel</span></span>
<span id="cb10-22"><a href="#cb10-22" tabindex="-1"></a></span>
<span id="cb10-23"><a href="#cb10-23" tabindex="-1"></a><span class="at">  </span><span class="fu">references</span><span class="kw">:</span></span>
<span id="cb10-24"><a href="#cb10-24" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> acknow_project</span></span>
<span id="cb10-25"><a href="#cb10-25" tabindex="-1"></a></span>
<span id="cb10-26"><a href="#cb10-26" tabindex="-1"></a><span class="at">  </span><span class="fu">projects</span><span class="kw">:</span></span>
<span id="cb10-27"><a href="#cb10-27" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> esmval</span></span>
<span id="cb10-28"><a href="#cb10-28" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> c3s-magic</span></span>
<span id="cb10-29"><a href="#cb10-29" tabindex="-1"></a></span>
<span id="cb10-30"><a href="#cb10-30" tabindex="-1"></a><span class="fu">datasets</span><span class="kw">:</span></span>
<span id="cb10-31"><a href="#cb10-31" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="kw">{</span><span class="fu">dataset</span><span class="kw">:</span><span class="at"> BCC-ESM1</span><span class="kw">,</span><span class="at"> </span><span class="fu">project</span><span class="kw">:</span><span class="at"> CMIP6</span><span class="kw">,</span><span class="at"> </span><span class="fu">exp</span><span class="kw">:</span><span class="at"> historical</span><span class="kw">,</span><span class="at"> </span><span class="fu">ensemble</span><span class="kw">:</span><span class="at"> r1i1p1f1</span><span class="kw">,</span><span class="at"> </span><span class="fu">grid</span><span class="kw">:</span><span class="at"> gn</span><span class="kw">}</span></span>
<span id="cb10-32"><a href="#cb10-32" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="kw">{</span><span class="fu">dataset</span><span class="kw">:</span><span class="at"> bcc-csm1-1</span><span class="kw">,</span><span class="at"> </span><span class="fu">version</span><span class="kw">:</span><span class="at"> v1</span><span class="kw">,</span><span class="at"> </span><span class="fu">project</span><span class="kw">:</span><span class="at"> CMIP5</span><span class="kw">,</span><span class="at"> </span><span class="fu">exp</span><span class="kw">:</span><span class="at"> historical</span><span class="kw">,</span><span class="at"> </span><span class="fu">ensemble</span><span class="kw">:</span><span class="at"> r1i1p1</span><span class="kw">}</span></span>
<span id="cb10-33"><a href="#cb10-33" tabindex="-1"></a></span>
<span id="cb10-34"><a href="#cb10-34" tabindex="-1"></a><span class="fu">preprocessors</span><span class="kw">:</span></span>
<span id="cb10-35"><a href="#cb10-35" tabindex="-1"></a><span class="co"># See https://docs.esmvaltool.org/projects/esmvalcore/en/latest/recipe/preprocessor.html</span></span>
<span id="cb10-36"><a href="#cb10-36" tabindex="-1"></a><span class="co"># for a description of the preprocessor functions.</span></span>
<span id="cb10-37"><a href="#cb10-37" tabindex="-1"></a></span>
<span id="cb10-38"><a href="#cb10-38" tabindex="-1"></a><span class="at">  </span><span class="fu">to_degrees_c</span><span class="kw">:</span></span>
<span id="cb10-39"><a href="#cb10-39" tabindex="-1"></a><span class="at">    </span><span class="fu">convert_units</span><span class="kw">:</span></span>
<span id="cb10-40"><a href="#cb10-40" tabindex="-1"></a><span class="at">      </span><span class="fu">units</span><span class="kw">:</span><span class="at"> degrees_C</span></span>
<span id="cb10-41"><a href="#cb10-41" tabindex="-1"></a></span>
<span id="cb10-42"><a href="#cb10-42" tabindex="-1"></a><span class="at">  </span><span class="fu">annual_mean_amsterdam</span><span class="kw">:</span></span>
<span id="cb10-43"><a href="#cb10-43" tabindex="-1"></a><span class="at">    </span><span class="fu">extract_location</span><span class="kw">:</span></span>
<span id="cb10-44"><a href="#cb10-44" tabindex="-1"></a><span class="at">      </span><span class="fu">location</span><span class="kw">:</span><span class="at"> Amsterdam</span></span>
<span id="cb10-45"><a href="#cb10-45" tabindex="-1"></a><span class="at">      </span><span class="fu">scheme</span><span class="kw">:</span><span class="at"> linear</span></span>
<span id="cb10-46"><a href="#cb10-46" tabindex="-1"></a><span class="at">    </span><span class="fu">annual_statistics</span><span class="kw">:</span></span>
<span id="cb10-47"><a href="#cb10-47" tabindex="-1"></a><span class="at">      </span><span class="fu">operator</span><span class="kw">:</span><span class="at"> mean</span></span>
<span id="cb10-48"><a href="#cb10-48" tabindex="-1"></a><span class="at">    </span><span class="fu">multi_model_statistics</span><span class="kw">:</span></span>
<span id="cb10-49"><a href="#cb10-49" tabindex="-1"></a><span class="at">      </span><span class="fu">statistics</span><span class="kw">:</span></span>
<span id="cb10-50"><a href="#cb10-50" tabindex="-1"></a><span class="at">        </span><span class="kw">-</span><span class="at"> mean</span></span>
<span id="cb10-51"><a href="#cb10-51" tabindex="-1"></a><span class="at">      </span><span class="fu">span</span><span class="kw">:</span><span class="at"> overlap</span></span>
<span id="cb10-52"><a href="#cb10-52" tabindex="-1"></a><span class="at">    </span><span class="fu">convert_units</span><span class="kw">:</span></span>
<span id="cb10-53"><a href="#cb10-53" tabindex="-1"></a><span class="at">      </span><span class="fu">units</span><span class="kw">:</span><span class="at"> degrees_C</span></span>
<span id="cb10-54"><a href="#cb10-54" tabindex="-1"></a></span>
<span id="cb10-55"><a href="#cb10-55" tabindex="-1"></a><span class="at">  </span><span class="fu">annual_mean_global</span><span class="kw">:</span></span>
<span id="cb10-56"><a href="#cb10-56" tabindex="-1"></a><span class="at">    </span><span class="fu">area_statistics</span><span class="kw">:</span></span>
<span id="cb10-57"><a href="#cb10-57" tabindex="-1"></a><span class="at">      </span><span class="fu">operator</span><span class="kw">:</span><span class="at"> mean</span></span>
<span id="cb10-58"><a href="#cb10-58" tabindex="-1"></a><span class="at">    </span><span class="fu">annual_statistics</span><span class="kw">:</span></span>
<span id="cb10-59"><a href="#cb10-59" tabindex="-1"></a><span class="at">      </span><span class="fu">operator</span><span class="kw">:</span><span class="at"> mean</span></span>
<span id="cb10-60"><a href="#cb10-60" tabindex="-1"></a><span class="at">    </span><span class="fu">convert_units</span><span class="kw">:</span></span>
<span id="cb10-61"><a href="#cb10-61" tabindex="-1"></a><span class="at">      </span><span class="fu">units</span><span class="kw">:</span><span class="at"> degrees_C</span></span>
<span id="cb10-62"><a href="#cb10-62" tabindex="-1"></a></span>
<span id="cb10-63"><a href="#cb10-63" tabindex="-1"></a><span class="fu">diagnostics</span><span class="kw">:</span></span>
<span id="cb10-64"><a href="#cb10-64" tabindex="-1"></a></span>
<span id="cb10-65"><a href="#cb10-65" tabindex="-1"></a><span class="at">  </span><span class="fu">map</span><span class="kw">:</span></span>
<span id="cb10-66"><a href="#cb10-66" tabindex="-1"></a><span class="at">    </span><span class="fu">description</span><span class="kw">:</span><span class="at"> Global map of temperature in January 2000.</span></span>
<span id="cb10-67"><a href="#cb10-67" tabindex="-1"></a><span class="at">    </span><span class="fu">themes</span><span class="kw">:</span></span>
<span id="cb10-68"><a href="#cb10-68" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> phys</span></span>
<span id="cb10-69"><a href="#cb10-69" tabindex="-1"></a><span class="at">    </span><span class="fu">realms</span><span class="kw">:</span></span>
<span id="cb10-70"><a href="#cb10-70" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> atmos</span></span>
<span id="cb10-71"><a href="#cb10-71" tabindex="-1"></a><span class="at">    </span><span class="fu">variables</span><span class="kw">:</span></span>
<span id="cb10-72"><a href="#cb10-72" tabindex="-1"></a><span class="at">      </span><span class="fu">tas</span><span class="kw">:</span></span>
<span id="cb10-73"><a href="#cb10-73" tabindex="-1"></a><span class="at">        </span><span class="fu">mip</span><span class="kw">:</span><span class="at"> Amon</span></span>
<span id="cb10-74"><a href="#cb10-74" tabindex="-1"></a><span class="at">        </span><span class="fu">preprocessor</span><span class="kw">:</span><span class="at"> to_degrees_c</span></span>
<span id="cb10-75"><a href="#cb10-75" tabindex="-1"></a><span class="at">        </span><span class="fu">timerange</span><span class="kw">:</span><span class="at"> 2000/P1M</span></span>
<span id="cb10-76"><a href="#cb10-76" tabindex="-1"></a><span class="fu">        caption</span><span class="kw">: </span><span class="ch">|</span></span>
<span id="cb10-77"><a href="#cb10-77" tabindex="-1"></a>          Global map of {long_name} in January 2000 according to {dataset}.</span>
<span id="cb10-78"><a href="#cb10-78" tabindex="-1"></a><span class="at">    </span><span class="fu">scripts</span><span class="kw">:</span></span>
<span id="cb10-79"><a href="#cb10-79" tabindex="-1"></a><span class="at">      </span><span class="fu">script1</span><span class="kw">:</span></span>
<span id="cb10-80"><a href="#cb10-80" tabindex="-1"></a><span class="at">        </span><span class="fu">script</span><span class="kw">:</span><span class="at"> examples/diagnostic.py</span></span>
<span id="cb10-81"><a href="#cb10-81" tabindex="-1"></a><span class="at">        </span><span class="fu">quickplot</span><span class="kw">:</span></span>
<span id="cb10-82"><a href="#cb10-82" tabindex="-1"></a><span class="at">          </span><span class="fu">plot_type</span><span class="kw">:</span><span class="at"> pcolormesh</span></span>
<span id="cb10-83"><a href="#cb10-83" tabindex="-1"></a><span class="at">          </span><span class="fu">cmap</span><span class="kw">:</span><span class="at"> Reds</span></span>
<span id="cb10-84"><a href="#cb10-84" tabindex="-1"></a></span>
<span id="cb10-85"><a href="#cb10-85" tabindex="-1"></a><span class="at">  </span><span class="fu">timeseries</span><span class="kw">:</span></span>
<span id="cb10-86"><a href="#cb10-86" tabindex="-1"></a><span class="at">    </span><span class="fu">description</span><span class="kw">:</span><span class="at"> Annual mean temperature in Amsterdam and global mean since 1850.</span></span>
<span id="cb10-87"><a href="#cb10-87" tabindex="-1"></a><span class="at">    </span><span class="fu">themes</span><span class="kw">:</span></span>
<span id="cb10-88"><a href="#cb10-88" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> phys</span></span>
<span id="cb10-89"><a href="#cb10-89" tabindex="-1"></a><span class="at">    </span><span class="fu">realms</span><span class="kw">:</span></span>
<span id="cb10-90"><a href="#cb10-90" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> atmos</span></span>
<span id="cb10-91"><a href="#cb10-91" tabindex="-1"></a><span class="at">    </span><span class="fu">variables</span><span class="kw">:</span></span>
<span id="cb10-92"><a href="#cb10-92" tabindex="-1"></a><span class="at">      </span><span class="fu">tas_amsterdam</span><span class="kw">:</span></span>
<span id="cb10-93"><a href="#cb10-93" tabindex="-1"></a><span class="at">        </span><span class="fu">short_name</span><span class="kw">:</span><span class="at"> tas</span></span>
<span id="cb10-94"><a href="#cb10-94" tabindex="-1"></a><span class="at">        </span><span class="fu">mip</span><span class="kw">:</span><span class="at"> Amon</span></span>
<span id="cb10-95"><a href="#cb10-95" tabindex="-1"></a><span class="at">        </span><span class="fu">preprocessor</span><span class="kw">:</span><span class="at"> annual_mean_amsterdam</span></span>
<span id="cb10-96"><a href="#cb10-96" tabindex="-1"></a><span class="at">        </span><span class="fu">timerange</span><span class="kw">:</span><span class="at"> 1850/2000</span></span>
<span id="cb10-97"><a href="#cb10-97" tabindex="-1"></a><span class="at">        </span><span class="fu">caption</span><span class="kw">:</span><span class="at"> Annual mean {long_name} in Amsterdam according to {dataset}.</span></span>
<span id="cb10-98"><a href="#cb10-98" tabindex="-1"></a><span class="at">      </span><span class="fu">tas_global</span><span class="kw">:</span></span>
<span id="cb10-99"><a href="#cb10-99" tabindex="-1"></a><span class="at">        </span><span class="fu">short_name</span><span class="kw">:</span><span class="at"> tas</span></span>
<span id="cb10-100"><a href="#cb10-100" tabindex="-1"></a><span class="at">        </span><span class="fu">mip</span><span class="kw">:</span><span class="at"> Amon</span></span>
<span id="cb10-101"><a href="#cb10-101" tabindex="-1"></a><span class="at">        </span><span class="fu">preprocessor</span><span class="kw">:</span><span class="at"> annual_mean_global</span></span>
<span id="cb10-102"><a href="#cb10-102" tabindex="-1"></a><span class="at">        </span><span class="fu">timerange</span><span class="kw">:</span><span class="at"> 1850/2000</span></span>
<span id="cb10-103"><a href="#cb10-103" tabindex="-1"></a><span class="at">        </span><span class="fu">caption</span><span class="kw">:</span><span class="at"> Annual global mean {long_name} according to {dataset}.</span></span>
<span id="cb10-104"><a href="#cb10-104" tabindex="-1"></a><span class="at">    </span><span class="fu">scripts</span><span class="kw">:</span></span>
<span id="cb10-105"><a href="#cb10-105" tabindex="-1"></a><span class="at">      </span><span class="fu">script1</span><span class="kw">:</span></span>
<span id="cb10-106"><a href="#cb10-106" tabindex="-1"></a><span class="at">        </span><span class="fu">script</span><span class="kw">:</span><span class="at"> examples/diagnostic.py</span></span>
<span id="cb10-107"><a href="#cb10-107" tabindex="-1"></a><span class="at">        </span><span class="fu">quickplot</span><span class="kw">:</span></span>
<span id="cb10-108"><a href="#cb10-108" tabindex="-1"></a><span class="at">          </span><span class="fu">plot_type</span><span class="kw">:</span><span class="at"> plot</span></span></code></pre>
</div>
<p>{: .solution}</p>
</blockquote>
</section><section><h2 class="section-heading" id="keys-and-values-in-recipe-settings">Keys and values in recipe settings<a class="anchor" aria-label="anchor" href="#keys-and-values-in-recipe-settings"></a></h2>
<hr class="half-width"><p>The <a href="https://docs.esmvaltool.org/projects/ESMValCore/en/latest/%20recipe/preprocessor.html?highlight=preprocessor" class="external-link">ESMValTool
pre-processors</a> cover a broad range of operations on the input data,
like time manipulation, area manipulation, land-sea masking, variable
derivation, etc. Let’s add the preprocessor <code>extract_region</code>
to a new section <code>annual_mean_regional</code>:</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">YAML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode yaml" tabindex="0"><code class="sourceCode yaml"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="fu">preprocessors</span><span class="kw">:</span></span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a><span class="at">  </span><span class="fu">annual_mean_regional</span><span class="kw">:</span></span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a><span class="at">    </span><span class="fu">annual_statistics</span><span class="kw">:</span></span>
<span id="cb11-4"><a href="#cb11-4" tabindex="-1"></a><span class="at">      </span><span class="fu">operator</span><span class="kw">:</span><span class="at"> mean</span></span>
<span id="cb11-5"><a href="#cb11-5" tabindex="-1"></a><span class="at">    </span><span class="fu">extract_region</span><span class="kw">:</span></span>
<span id="cb11-6"><a href="#cb11-6" tabindex="-1"></a><span class="at">      </span><span class="fu">start_longitude</span><span class="kw">:</span><span class="at"> </span><span class="dv">-10</span></span>
<span id="cb11-7"><a href="#cb11-7" tabindex="-1"></a><span class="at">      </span><span class="fu">end_longitude</span><span class="kw">:</span><span class="at"> </span><span class="dv">40</span></span>
<span id="cb11-8"><a href="#cb11-8" tabindex="-1"></a><span class="at">      </span><span class="fu">start_latitude</span><span class="kw">:</span><span class="at"> </span><span class="dv">27</span></span>
<span id="cb11-9"><a href="#cb11-9" tabindex="-1"></a><span class="at">      </span><span class="fu">end_latitude</span><span class="kw">:</span><span class="at"> </span><span class="dv">70</span></span></code></pre>
</div>
<p>Also, we change the <code>projects</code> value <code>esmval</code>
to <code>tutorial</code>:</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">YAML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode yaml" tabindex="0"><code class="sourceCode yaml"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="fu">projects</span><span class="kw">:</span></span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> tutorial</span></span>
<span id="cb12-3"><a href="#cb12-3" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> c3s-magic</span></span></code></pre>
</div>
<p>Then, we save the file and run the recipe: ~<del>bash esmvaltool run
recipe_python.yml</del>~</p>
<pre><code>ValueError: Tag 'tutorial' does not exist in section 'projects' of
esmvaltool/config-references.yml 2020-06-29 18:09:56,641 UTC [46055] INFO If you
have a question or need help, please start a new discussion on
https://github.com/ESMValGroup/ESMValTool/discussions If you suspect this is a
bug, please open an issue on https://github.com/ESMValGroup/ESMValTool/issues To
make it easier to find out what the problem is, please consider attaching the
files run/recipe_*.yml and run/main_log_debug.txt from the output directory.</code></pre>
<p>{: .error}</p>
<p>The values for the keys <code>author</code>, <code>maintainer</code>,
<code>projects</code> and <code>references</code> in the recipe should
be known by ESMValTool:</p>
<ul><li>A list of ESMValTool author, maintainer, and projects can be found
in the <a href="https://github.com/ESMValGroup/ESMValTool/blob/master/%20esmvaltool/config-references.yml" class="external-link">config-references.yml</a>.</li>
<li>ESMValTool references in <code>BibTeX</code> format can be found in
the <a href="https://github.com/ESMValGroup/ESMValTool/%20tree/master/esmvaltool/references" class="external-link">ESMValTool/esmvaltool/references</a>
directory.</li>
</ul><blockquote>
<h2 id="esmvaltool-cant-locate-the-data">ESMValTool can’t locate the
data</h2>
<p>You are assisting a colleague with ESMValTool. The colleague replaces
the <code>CanESM2</code> entry in
<code>dataset: CanESM2, project: CMIP5</code> to <code>ACCESS1-3</code>
and runs the recipe. However, ESMValTool encounters an error like:</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="ex">ERROR</span>   No input files found for variable {<span class="st">'short_name'</span>: <span class="st">'tas'</span>, <span class="st">'mip'</span>: <span class="st">'Amon'</span>,</span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a><span class="st">'preprocessor'</span><span class="ex">:</span> <span class="st">'annual_mean_amsterdam'</span>, <span class="st">'variable_group'</span>: <span class="st">'tas_amsterdam'</span>,</span>
<span id="cb14-3"><a href="#cb14-3" tabindex="-1"></a><span class="st">'diagnostic'</span><span class="ex">:</span> <span class="st">'timeseries'</span>, <span class="st">'dataset'</span>: <span class="st">'ACCESS1-3'</span>, <span class="st">'project'</span>: <span class="st">'CMIP5'</span>, <span class="st">'exp'</span>:</span>
<span id="cb14-4"><a href="#cb14-4" tabindex="-1"></a><span class="st">'historical'</span><span class="ex">,</span> <span class="st">'ensemble'</span>: <span class="st">'r1i1p1'</span>, <span class="st">'recipe_dataset_index'</span>: 1, <span class="st">'institute'</span>:</span>
<span id="cb14-5"><a href="#cb14-5" tabindex="-1"></a><span class="ex">[</span><span class="st">'CSIRO-BOM'</span><span class="ex">],</span> <span class="st">'product'</span>: [<span class="st">'output1'</span>, <span class="st">'output2'</span>], <span class="st">'timerange'</span>: <span class="st">'1850/2000'</span>,</span>
<span id="cb14-6"><a href="#cb14-6" tabindex="-1"></a><span class="st">'alias'</span><span class="ex">:</span> <span class="st">'CMIP5'</span>, <span class="st">'original_short_name'</span>: <span class="st">'tas'</span>, <span class="st">'standard_name'</span>:</span>
<span id="cb14-7"><a href="#cb14-7" tabindex="-1"></a><span class="st">'air_temperature'</span><span class="ex">,</span> <span class="st">'long_name'</span>: <span class="st">'Near-Surface Air Temperature'</span>, <span class="st">'units'</span>: <span class="st">'K'</span>,</span>
<span id="cb14-8"><a href="#cb14-8" tabindex="-1"></a><span class="st">'modeling_realm'</span><span class="ex">:</span> <span class="pp">[</span><span class="st">'atmos'</span><span class="pp">]</span>, <span class="st">'frequency'</span>: <span class="st">'mon'</span>, <span class="st">'start_year'</span>: 1850,</span>
<span id="cb14-9"><a href="#cb14-9" tabindex="-1"></a><span class="st">'end_year'</span><span class="ex">:</span> 2000}</span>
<span id="cb14-10"><a href="#cb14-10" tabindex="-1"></a><span class="ex">ERROR</span>   Looked for files matching</span>
<span id="cb14-11"><a href="#cb14-11" tabindex="-1"></a><span class="ex">[</span><span class="st">'tas_Amon_ACCESS1-3_historical_r1i1p1*.nc'</span><span class="ex">],</span> but did not find any existing</span>
<span id="cb14-12"><a href="#cb14-12" tabindex="-1"></a><span class="ex">input</span> directory</span>
<span id="cb14-13"><a href="#cb14-13" tabindex="-1"></a><span class="ex">ERROR</span>   Set <span class="st">'log_level'</span> to <span class="st">'debug'</span> to get more information</span></code></pre>
</div>
<p>What suggestions would you give the researcher for fixing the
error?</p>
<blockquote>
<h2 id="solution-1">Solution</h2>
<ol style="list-style-type: decimal"><li>Check <code>user-config.yml</code> to see if the correct directory
for input data is introduced</li>
<li>Check the available data, regarding exp, mip, ensemble, start_year,
and end_year</li>
<li>Check the variable names in the diagnostics section in the recipe {:
.solution} {: .challenge}</li>
</ol></blockquote>
</blockquote>
</section><section><h2 class="section-heading" id="check-pre-processed-data">Check pre-processed data<a class="anchor" aria-label="anchor" href="#check-pre-processed-data"></a></h2>
<hr class="half-width"><p>The setting <code>save_intermediary_cubes</code> in the configuration
file can be used to save the pre-processed data. More information about
this setting can be found at <a href="%7B%7B%20page.root%20%7D%7D%7B%%20link%20_episodes/03-configuration.md%20%%7D">Configuration</a>.</p>
<blockquote>
<h2 id="save_intermediary_cubes">save_intermediary_cubes</h2>
<p>Note that this setting should only be used for debugging, as it
significantly slows down the recipe and increases disk usage because a
lot of output files need to be stored. {: .callout}</p>
</blockquote>
</section><section><h2 class="section-heading" id="check-diagnostic-script-path">Check diagnostic script path<a class="anchor" aria-label="anchor" href="#check-diagnostic-script-path"></a></h2>
<hr class="half-width"><p>The result of the pre-processor is passed to the
<code>examples/diagnostic.py</code> script, that is introduced in the
recipe as:</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">YAML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode yaml" tabindex="0"><code class="sourceCode yaml"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="fu">scripts</span><span class="kw">:</span></span>
<span id="cb15-2"><a href="#cb15-2" tabindex="-1"></a><span class="at">  </span><span class="fu">script1</span><span class="kw">:</span></span>
<span id="cb15-3"><a href="#cb15-3" tabindex="-1"></a><span class="at">    </span><span class="fu">script</span><span class="kw">:</span></span>
<span id="cb15-4"><a href="#cb15-4" tabindex="-1"></a><span class="at">      </span><span class="fu">script</span><span class="kw">:</span><span class="at"> examples/diagnostic.py</span></span></code></pre>
</div>
<p>The diagnostic scripts are located in the folder
<code>diag_scripts</code> in the ESMValTool installation directory
<code>&lt;path_to_esmvaltool&gt;</code>. To find where ESMValTool is
located on your system, see <a href="%7B%7B%20page.root%20%7D%7D%7B%%20link%20_episodes/02-installation.md%20%%7D">Installation</a>.</p>
<p>Let’s see what happens if we can change the script path as:</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">YAML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode yaml" tabindex="0"><code class="sourceCode yaml"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a><span class="fu">scripts</span><span class="kw">:</span></span>
<span id="cb16-2"><a href="#cb16-2" tabindex="-1"></a><span class="at">  </span><span class="fu">script1</span><span class="kw">:</span></span>
<span id="cb16-3"><a href="#cb16-3" tabindex="-1"></a><span class="at">    </span><span class="fu">script</span><span class="kw">:</span></span>
<span id="cb16-4"><a href="#cb16-4" tabindex="-1"></a><span class="at">      </span><span class="fu">script</span><span class="kw">:</span><span class="at"> diag_scripts/ocean/diagnostic_timeseries.py</span></span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a>  <span class="ex">esmvaltool</span> run examples/recipe_python.yml</span></code></pre>
</div>
<pre><code>esmvalcore._task.DiagnosticError: Cannot execute script
'diag_scripts/ocean/diagnostic_timeseries.py'
(~/mambaforge/envs/esmvaltool2.6/lib/python3.10/site-packages/esmvaltool/
diag_scripts/diag_scripts/ocean/diagnostic_timeseries.py):
file does not exist. 2022-10-18 11:42:34,136 UTC [39323] INFO If you have a
question or need help, please start a new discussion on
https://github.com/ESMValGroup/ESMValTool/discussions If you suspect this is a
bug, please open an issue on https://github.com/ESMValGroup/ESMValTool/issues To
make it easier to find out what the problem is, please consider attaching the
files run/recipe_*.yml and run/main_log_debug.txt from the output directory.</code></pre>
<p>{: .error}</p>
<p>The script path should be relative to <code>diag_scripts</code>
directory. It means that the script
<code>diagnostic_timeseries.py</code> is located in
<code>&lt;path_to_esmvaltool&gt;/diag_scripts/ocean/</code>.
Alternatively, the script path can be an absolute path. To examine this,
we can download the script from the <code>ESMValTool</code>
repository:</p>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a><span class="fu">wget</span> https://raw.githubusercontent.com/ESMValGroup/ESMValTool/main/esmvaltool/<span class="dt">\</span></span>
<span id="cb19-2"><a href="#cb19-2" tabindex="-1"></a>diag_scripts/ocean/diagnostic_timeseries.py</span></code></pre>
</div>
<p>One way to get the absolute path is to run:</p>
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a><span class="fu">readlink</span> <span class="at">-f</span> diagnostic_timeseries.py</span></code></pre>
</div>
<p>Then we can update the script path :</p>
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">YAML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode yaml" tabindex="0"><code class="sourceCode yaml"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a><span class="fu">scripts</span><span class="kw">:</span></span>
<span id="cb21-2"><a href="#cb21-2" tabindex="-1"></a><span class="at">  </span><span class="fu">script1</span><span class="kw">:</span></span>
<span id="cb21-3"><a href="#cb21-3" tabindex="-1"></a><span class="at">    </span><span class="fu">script</span><span class="kw">:</span></span>
<span id="cb21-4"><a href="#cb21-4" tabindex="-1"></a><span class="at">      </span><span class="fu">script</span><span class="kw">:</span><span class="at"> &lt;path_to_script&gt;/diagnostic_timeseries.py</span></span></code></pre>
</div>
<p>Then, run the recipe again and examine the output to see
<code>Run was successful</code>!</p>
<blockquote>
<h2 id="available-recipe-and-diagnostic-scripts">Available recipe and
diagnostic scripts</h2>
<p>ESMValTool provides a broad suite of <a href="https://docs.esmvaltool.org/en/latest/recipes/index.html" class="external-link">recipes
and diagnostic</a> scripts for different disciplines like atmosphere,
climate metrics, future projections, IPCC, land, ocean, …. {:
.callout}</p>
</blockquote>
<blockquote>
<h2 id="re-running-a-diagnostic">Re-running a diagnostic</h2>
<p>Look at the <code>main_log.txt</code> file and answer the following
question: How to re-run the diagnostic script?</p>
<blockquote>
<h2 id="solution-2">Solution</h2>
<p>The <code>main_log.txt</code> file contains information on how to
re-run the diagnostic script without re-running the pre-processors:</p>
<div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a><span class="ex">2020-06-29</span> 20:36:32,844 UTC <span class="pp">[</span><span class="ss">52810</span><span class="pp">]</span> INFO    To re-run this diagnostic script, run:</span></code></pre>
</div>
<p>If you run the command in a terminal, you will be able to re-run the
diagnostic. {: .solution} {: .challenge}</p>
</blockquote>
</blockquote>
<blockquote>
<h2 id="memory-issues">Memory issues</h2>
<p>If you run out of memory, try setting <code>max_parallel_tasks</code>
to 1 in the configuration file. Then, check the amount of memory you
need for that by inspecting the file <code>run/resource_usage.txt</code>
in the output directory. Using the number, there you can increase the
number of parallel tasks again to a reasonable number for the amount of
memory available in your system. {: .callout}</p>
</blockquote>
<p>{% include links.md %}</p>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></div> <!-- / div.lesson-content -->
    </main><!-- / main#main-content.main-content --><nav class="bottom-pagination mx-md-4" aria-label="Previous and Next Chapter"><div class="d-block d-sm-block d-md-none">
        <a class="chapter-link" href="09-cmorization.html"><i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>Previous</a>
        <a class="chapter-link float-end" href="index.html">Next<i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i></a>
      </div>
      <!-- content for large screens -->
      <div class="d-none d-sm-none d-md-block">
        <a class="chapter-link" href="09-cmorization.html" rel="prev">
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>
          Previous: CMORization: adding
        </a>
        <a class="chapter-link float-end" href="index.html" rel="next">
          Home
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i>
        </a>
      </div>
    </nav></div> <!-- / div.primary-content.col-xs-12 -->
<!-- END:   inst/pkgdown/templates/content-instructor.html-->

      </div><!--/div.row-->
      		<footer class="row footer mx-md-3"><hr><div class="col-md-6">
        <p>This lesson is subject to the <a href="CODE_OF_CONDUCT.html">Code of Conduct</a></p>
        <p>

        <a href="https://github.com/ehogan/ESMValTool_Tutorial/edit/main/episodes/10-debugging.md" class="external-link">Edit on GitHub</a>

	
        | <a href="https://github.com/ehogan/ESMValTool_Tutorial/blob/main/CONTRIBUTING.md" class="external-link">Contributing</a>
        | <a href="https://github.com/ehogan/ESMValTool_Tutorial/" class="external-link">Source</a></p>
				<p><a href="https://github.com/ehogan/ESMValTool_Tutorial/blob/main/CITATION.cff" class="external-link">Cite</a> | <a href="mailto:team@carpentries.org">Contact</a> | <a href="https://carpentries.org/about/" class="external-link">About</a></p>
			</div>
			<div class="col-md-6">

        <p>Materials licensed under <a href="LICENSE.html">CC-BY 4.0</a> by the authors</p>

        <p>Template licensed under <a href="https://creativecommons.org/licenses/by-sa/4.0/" class="external-link">CC-BY 4.0</a> by <a href="https://carpentries.org/" class="external-link">The Carpentries</a></p>
        <p>Built with <a href="https://github.com/carpentries/sandpaper/tree/0.16.10" class="external-link">sandpaper (0.16.10)</a>, <a href="https://github.com/carpentries/pegboard/tree/0.7.7" class="external-link">pegboard (0.7.7)</a>, and <a href="https://github.com/carpentries/varnish/tree/1.0.5" class="external-link">varnish (1.0.5)</a></p>
			</div>
		</footer></div> <!-- / div.container -->
	<div id="to-top">
		<a href="#top">
      <i class="search-icon" data-feather="arrow-up" role="img" aria-label="Back To Top"></i><br><!-- <span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top --><span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top
		</a>
	</div>
  <script type="application/ld+json">
    {
  "@context": "https://schema.org",
  "@type": "TrainingMaterial",
  "@id": "https://ehogan.github.io/ESMValTool_Tutorial/10-debugging.html",
  "inLanguage": "en",
  "dct:conformsTo": "https://bioschemas.org/profiles/TrainingMaterial/1.0-RELEASE",
  "description": "A Carpentries Lesson teaching foundational data and coding skills to researchers worldwide",
  "keywords": "software, data, lesson, The Carpentries",
  "name": "Debugging",
  "creativeWorkStatus": "active",
  "url": "https://ehogan.github.io/ESMValTool_Tutorial/10-debugging.html",
  "identifier": "https://ehogan.github.io/ESMValTool_Tutorial/10-debugging.html",
  "dateCreated": "2024-11-21",
  "dateModified": "2024-11-21",
  "datePublished": "2024-12-19"
}

  </script><script>
		feather.replace();
	</script></body></html><!-- END:   inst/pkgdown/templates/layout.html-->

