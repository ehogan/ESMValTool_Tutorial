<!DOCTYPE html>
<!-- START: inst/pkgdown/templates/layout.html --><!-- Generated by pkgdown: do not edit by hand --><html lang="en" data-bs-theme="auto"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><title>ESMValTool Tutorial: Running your first recipe</title><meta name="viewport" content="width=device-width, initial-scale=1"><script src="assets/themetoggle.js"></script><link rel="stylesheet" type="text/css" href="assets/styles.css"><script src="assets/scripts.js" type="text/javascript"></script><!-- mathjax --><script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      config: ["MMLorHTML.js"],
      jax: ["input/TeX","input/MathML","output/HTML-CSS","output/NativeMML", "output/PreviewHTML"],
      extensions: ["tex2jax.js","mml2jax.js","MathMenu.js","MathZoom.js", "fast-preview.js", "AssistiveMML.js", "a11y/accessibility-menu.js"],
      TeX: {
        extensions: ["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"]
      },
      tex2jax: {
        inlineMath: [['\\(', '\\)']],
        displayMath: [ ['$$','$$'], ['\\[', '\\]'] ],
        processEscapes: true
      }
    });
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><!-- Responsive Favicon for The Carpentries --><link rel="apple-touch-icon" sizes="180x180" href="favicons/incubator/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="favicons/incubator/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="favicons/incubator/favicon-16x16.png"><link rel="manifest" href="favicons/incubator/site.webmanifest"><link rel="mask-icon" href="favicons/incubator/safari-pinned-tab.svg" color="#5bbad5"><meta name="msapplication-TileColor" content="#da532c"><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="black"></head><body>
    <header id="top" class="navbar navbar-expand-md top-nav incubator"><svg xmlns="http://www.w3.org/2000/svg" class="d-none"><symbol id="check2" viewbox="0 0 16 16"><path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"></path></symbol><symbol id="circle-half" viewbox="0 0 16 16"><path d="M8 15A7 7 0 1 0 8 1v14zm0 1A8 8 0 1 1 8 0a8 8 0 0 1 0 16z"></path></symbol><symbol id="moon-stars-fill" viewbox="0 0 16 16"><path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"></path><path d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097l.387-1.162zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"></path></symbol><symbol id="sun-fill" viewbox="0 0 16 16"><path d="M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"></path></symbol></svg><a class="visually-hidden-focusable skip-link" href="#main-content">Skip to main content</a>
  <div class="container-fluid top-nav-container">
    <div class="col-md-8">
      <div class="large-logo">
        <img id="incubator-logo" alt="Lesson Description" src="assets/images/incubator-logo.svg"><span class="badge text-bg-danger">
          <abbr title="This lesson is in the pre-alpha phase, which means that it is in early development, but has not yet been taught.">
            <a href="https://cdh.carpentries.org/the-lesson-life-cycle.html#early-development-pre-alpha-through-alpha" class="external-link alert-link">
              <i aria-hidden="true" class="icon" data-feather="alert-octagon" style="border-radius: 5px"></i>
              Pre-Alpha
            </a>
            <span class="visually-hidden">This lesson is in the pre-alpha phase, which means that it is in early development, but has not yet been taught.</span>
          </abbr>
        </span>

      </div>
    </div>
    <div class="selector-container">
      <div id="theme-selector">
        <li class="nav-item dropdown" id="theme-button-list">
          <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
            <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="bd-theme-text"><li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                Light
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                Dark
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                Auto
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
          </ul></li>
      </div>

      <div class="dropdown" id="instructor-dropdown">
        <button class="btn btn-secondary dropdown-toggle bordered-button" type="button" id="dropdownMenu1" data-bs-toggle="dropdown" aria-expanded="false">
          <i aria-hidden="true" class="icon" data-feather="eye"></i> Learner View <i data-feather="chevron-down"></i>
        </button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1"><li><button class="dropdown-item" type="button" onclick="window.location.href='instructor/04-recipe.html';">Instructor View</button></li>
        </ul></div>
    </div>
  </div>
  <hr></header><nav class="navbar navbar-expand-xl bottom-nav incubator" aria-label="Main Navigation"><div class="container-fluid nav-container">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle Navigation">
      <span class="navbar-toggler-icon"></span>
      <span class="menu-title">Menu</span>
    </button>
    <div class="nav-logo">
      <img class="small-logo" alt="Lesson Description" src="assets/images/incubator-logo-sm.svg"></div>
    <div class="lesson-title-md">
      ESMValTool Tutorial
    </div>
    <div class="search-icon-sm">
      <!-- TODO: do not show until we have search
        <i role="img" aria-label="Search the All In One page" data-feather="search"></i>
      -->
    </div>
    <div class="desktop-nav">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0"><li class="nav-item">
          <span class="lesson-title">
            ESMValTool Tutorial
          </span>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="key-points.html">Key Points</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="reference.html#glossary">Glossary</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="profiles.html">Learner Profiles</a>
        </li>
        <li class="nav-item dropdown">
          <button class="nav-link dropdown-toggle" id="navbarDropdown" data-bs-toggle="dropdown" aria-expanded="false">
            More <i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdown"><li><a class="dropdown-item" href="reference.html">Reference</a></li>
          </ul></li>
      </ul></div>
    <!--
    <form class="d-flex col-md-2 search-form">
      <fieldset disabled>
      <input class="form-control me-2 searchbox" type="search" placeholder="" aria-label="">
        <button class="btn btn-outline-success tablet-search-button"  type="submit">
          <i class="search-icon" data-feather="search" role="img" aria-label="Search the All In One page"></i>
        </button>
      </fieldset>
    </form>
    -->
    <a id="search-button" class="btn btn-primary" href="aio.html" role="button" aria-label="Search the All In One page">Search the All In One page</a>
  </div><!--/div.container-fluid -->
</nav><div class="col-md-12 mobile-title">
  ESMValTool Tutorial
</div>

<aside class="col-md-12 lesson-progress"><div style="width: 19%" class="percentage">
    19%
  </div>
  <div class="progress incubator">
    <div class="progress-bar incubator" role="progressbar" style="width: 19%" aria-valuenow="19" aria-label="Lesson Progress" aria-valuemin="0" aria-valuemax="100">
    </div>
  </div>
</aside><div class="container">
      <div class="row">
        <!-- START: inst/pkgdown/templates/navbar.html -->
<div id="sidebar-col" class="col-lg-4">
  <div id="sidebar" class="sidebar">
      <nav aria-labelledby="flush-headingEleven"><button role="button" aria-label="close menu" alt="close menu" aria-expanded="true" aria-controls="sidebar" class="collapse-toggle" data-collapse="Collapse " data-episodes="Episodes ">
          <i class="search-icon" data-feather="x" role="img"></i>
        </button>
        <div class="sidebar-inner">
          <div class="row mobile-row" id="theme-row-mobile">
            <div class="col" id="theme-selector">
              <li class="nav-item dropdown" id="theme-button-list">
                <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
                  <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><span class="d-lg-none ms-1" id="bd-theme-text">Toggle Theme</span>
                </button>
                <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="bd-theme-text"><li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                      Light
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                      Dark
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                      <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                      Auto
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                </ul></li>
            </div>
          </div>
          <div class="row mobile-row">
            <div class="col">
              <div class="sidenav-view-selector">
                <div class="accordion accordion-flush" id="accordionFlush9">
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="flush-headingNine">
                      <button class="accordion-button collapsed" id="instructor" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseNine" aria-expanded="false" aria-controls="flush-collapseNine">
                        <i id="eye" aria-hidden="true" class="icon" data-feather="eye"></i> Learner View
                      </button>
                    </h2>
                    <div id="flush-collapseNine" class="accordion-collapse collapse" aria-labelledby="flush-headingNine" data-bs-parent="#accordionFlush2">
                      <div class="accordion-body">
                        <a href="instructor/04-recipe.html">Instructor View</a>
                      </div>
                    </div>
                  </div><!--/div.accordion-item-->
                </div><!--/div.accordion-flush-->
              </div><!--div.sidenav-view-selector -->
            </div><!--/div.col -->

            <hr></div><!--/div.mobile-row -->

          <div class="accordion accordion-flush" id="accordionFlush11">
            <div class="accordion-item">

              <button id="chapters" class="accordion-button show" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseEleven" aria-expanded="false" aria-controls="flush-collapseEleven">
                <h2 class="accordion-header chapters" id="flush-headingEleven">
                  EPISODES
                </h2>
              </button>
              <div id="flush-collapseEleven" class="accordion-collapse show collapse" aria-labelledby="flush-headingEleven" data-bs-parent="#accordionFlush11">

                <div class="accordion-body">
                  <div class="accordion accordion-flush" id="accordionFlush1">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading1">
        <a href="index.html">Summary and Setup</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush2">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading2">
        <a href="00-introduction.html">1. Introduction</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush3">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading3">
        <a href="01-quickstart.html">2. Quickstart guide</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush4">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading4">
        <a href="02-installation.html">3. Installation</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush5">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading5">
        <a href="03-configuration.html">4. Configuration</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlushcurrent">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-headingcurrent">
      <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapsecurrent" aria-expanded="true" aria-controls="flush-collapsecurrent">
        <span class="visually-hidden">Current Chapter</span>
        <span class="current-chapter">
        5. Running your first recipe
        </span>
      </button>
    </div><!--/div.accordion-header-->

    <div id="flush-collapsecurrent" class="accordion-collapse collapse show" aria-labelledby="flush-headingcurrent" data-bs-parent="#accordionFlushcurrent">
      <div class="accordion-body">
        <ul><li><a href="#running-an-existing-recipe">Running an existing recipe</a></li>
<li><a href="#investigating-the-log-messages">Investigating the log messages</a></li>
<li><a href="#examining-the-recipe-file">Examining the recipe file</a></li>
<li><a href="#modifying-the-example-recipe">Modifying the example recipe</a></li>
        </ul></div><!--/div.accordion-body-->
    </div><!--/div.accordion-collapse-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush7">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading7">
        <a href="05-conclusions.html">6. Conclusion of the basic tutorial</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush8">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading8">
        <a href="06-preprocessor.html">7. Writing your own recipe</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush9">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading9">
        <a href="07-development-setup.html">8. Development and contribution</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush10">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading10">
        <a href="08-diagnostics.html">9. Writing your own diagnostic script</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush11">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading11">
        <a href="09-cmorization.html">10. CMORization: adding new datasets to ESMValTool</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush12">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading12">
        <a href="10-debugging.html">11. Debugging</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

                </div>
              </div>
            </div>

            <hr class="half-width"><div class="accordion accordion-flush lesson-resources" id="accordionFlush12">
              <div class="accordion-item">
                <h2 class="accordion-header" id="flush-headingTwelve">
                  <button class="accordion-button collapsed" id="lesson-resources" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTwelve" aria-expanded="false" aria-controls="flush-collapseTwelve">
                    RESOURCES
                  </button>
                </h2>
                <div id="flush-collapseTwelve" class="accordion-collapse collapse" aria-labelledby="flush-headingTwelve" data-bs-parent="#accordionFlush12">
                  <div class="accordion-body">
                    <ul><li>
                        <a href="key-points.html">Key Points</a>
                      </li>
                      <li>
                        <a href="reference.html#glossary">Glossary</a>
                      </li>
                      <li>
                        <a href="profiles.html">Learner Profiles</a>
                      </li>
                      <li><a href="reference.html">Reference</a></li>
                    </ul></div>
                </div>
              </div>
            </div>
            <hr class="half-width lesson-resources"><a href="aio.html">See all in one page</a>


            <hr class="d-none d-sm-block d-md-none"><div class="d-grid gap-1">

            </div>
          </div><!-- /div.accordion -->
        </div><!-- /div.sidebar-inner -->
      </nav></div><!-- /div.sidebar -->
  </div><!-- /div.sidebar-col -->
<!-- END:   inst/pkgdown/templates/navbar.html-->

        <!-- START: inst/pkgdown/templates/content-instructor.html -->
  <div class="col-xl-8 col-lg-12 primary-content">
    <nav class="lesson-content mx-md-4" aria-label="Previous and Next Chapter"><!-- content for small screens --><div class="d-block d-sm-block d-md-none">
        <a class="chapter-link" href="03-configuration.html"><i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>Previous</a>
        <a class="chapter-link float-end" href="05-conclusions.html">Next<i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i></a>
      </div>
      <!-- content for large screens -->
      <div class="d-none d-sm-none d-md-block">
        <a class="chapter-link" href="03-configuration.html" rel="prev">
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>
          Previous: Configuration
        </a>
        <a class="chapter-link float-end" href="05-conclusions.html" rel="next">
          Next: Conclusion of the...
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i>
        </a>
      </div>
      <hr></nav><main id="main-content" class="main-content"><div class="container lesson-content">
        <h1>Running your first recipe</h1>
        <p>Last updated on 2024-11-21 |

        <a href="https://github.com/ehogan/ESMValTool_Tutorial/edit/main/episodes/04-recipe.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>



        <div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>

        

<p>This episode describes how ESMValTool recipes work, how to run a
recipe and how to explore the recipe output. By the end of this episode,
you should be able to run your first recipe, look at the recipe output,
and make small modifications.</p>
<section><h2 class="section-heading" id="running-an-existing-recipe">Running an existing recipe<a class="anchor" aria-label="anchor" href="#running-an-existing-recipe"></a></h2>
<hr class="half-width"><p>The recipe format has briefly been introduced in the
[Introduction][lesson-introduction] episode. To see all the recipes that
are shipped with ESMValTool, type</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="ex">esmvaltool</span> recipes list</span></code></pre>
</div>
<p>We will start by running <a href="https://docs.esmvaltool.%20org/en/latest/recipes/recipe_examples.html" class="external-link">examples/recipe_python.yml</a></p>
<pre><code>esmvaltool run examples/recipe_python.yml</code></pre>
<p>or if you have the user configuration file in your current directory
then</p>
<pre><code>esmvaltool run --config_file ./config-user.yml examples/recipe_python.yml</code></pre>
<p>If everything is okay, you should see that ESMValTool is printing a
lot of output to the command line. The final message should be “Run was
successful”. The exact output varies depending on your machine, but it
should look something like the example log output on terminal below.</p>
<p>{% include example_output.txt %}</p>
<blockquote>
<h2 id="pro-tip-esmvaltool-search-paths">Pro tip: ESMValTool search
paths</h2>
<p>You might wonder how ESMValTool was able find the recipe file, even
though it’s not in your working directory. All the recipe paths printed
from <code>esmvaltool recipes list</code> are relative to ESMValTool’s
installation location. This is where ESMValTool will look if it cannot
find the file by following the path from your working directory. {:
.callout}</p>
</blockquote>
</section><section><h2 class="section-heading" id="investigating-the-log-messages">Investigating the log messages<a class="anchor" aria-label="anchor" href="#investigating-the-log-messages"></a></h2>
<hr class="half-width"><p>Let’s dissect what’s happening here.</p>
<blockquote>
<h2 id="output-files-and-directories">Output files and directories</h2>
<p>After the banner and general information, the output starts with some
important locations.</p>
<ol style="list-style-type: decimal"><li>Did ESMValTool use the right config file?</li>
<li>What is the path to the example recipe?</li>
<li>What is the main output folder generated by ESMValTool?</li>
<li>Can you guess what the different output directories are for?</li>
<li>ESMValTool creates two log files. What is the difference?</li>
</ol><blockquote>
<h2 id="answers">Answers</h2>
<ol style="list-style-type: decimal"><li>The config file should be the one we edited in the previous episode,
something like
<code>/home/&lt;username&gt;/.esmvaltool/config-user.yml</code> or
<code>~/esmvaltool_tutorial/config-user.yml</code>.</li>
<li>ESMValTool found the recipe in its installation directory, something
like
<code>/home/users/username/mambaforge/envs/esmvaltool/bin/esmvaltool/recipes/examples/</code>
or if you are using a pre-installed module on a server, something like
<code>/apps/jasmin/community/esmvaltool/ESMValTool_&lt;version&gt; /esmvaltool/recipes/examples/recipe_python.yml</code>,
where <code>&lt;version&gt;</code> is the latest release.</li>
<li>ESMValTool creates a time-stamped output directory for every run. In
this case, it should be something like
<code>recipe_python_YYYYMMDD_HHMMSS</code>. This folder is made inside
the output directory specified in the previous episode:
<code>~/esmvaltool_tutorial/esmvaltool_output</code>.</li>
<li>There should be four output folders:
<ul><li>
<code>plots/</code>: this is where output figures are stored.</li>
<li>
<code>preproc/</code>: this is where pre-processed data are
stored.</li>
<li>
<code>run/</code>: this is where esmvaltool stores general
information about the run, such as log messages and a copy of the recipe
file.</li>
<li>
<code>work/</code>: this is where output files (not figures) are
stored.</li>
</ul></li>
<li>The log files are:
<ul><li>
<code>main_log.txt</code> is a copy of the command-line output</li>
<li>
<code>main_log_debug.txt</code> contains more detailed information
that may be useful for debugging.</li>
</ul></li>
</ol><p>{: .solution} {: .challenge}</p>
</blockquote>
</blockquote>
<blockquote>
<h2 id="debugging-no-preproc-directory">Debugging: No ‘preproc’
directory?</h2>
<p>If you’re missing the preproc directory, then your
<code>config-user.yml</code> file has the value
<code>remove_preproc_dir</code> set to <code>true</code> (this is used
to save disk space). Please set this value to <code>false</code> and run
the recipe again.</p>
<p>{: .callout}</p>
</blockquote>
<p>After the output locations, there are two main sections that can be
distinguished in the log messages:</p>
<ul><li>Creating tasks</li>
<li>Executing tasks</li>
</ul><blockquote>
<h2 id="analyse-the-tasks">Analyse the tasks</h2>
<p>List all the tasks that ESMValTool is executing for this recipe. Can
you guess what this recipe does?</p>
<blockquote>
<h2 id="answer">Answer</h2>
<p>Just after all the ‘creating tasks’ and before ‘executing tasks’, we
find the following line in the output:</p>
<pre><code>[134535] INFO    These tasks will be executed: map/tas, timeseries/tas_global,
timeseries/script1, map/script1, timeseries/tas_amsterdam</code></pre>
<p>So there are three tasks related to timeseries: global temperature,
Amsterdam temperature, and a script (<em>tas</em>: near-surface air
temperature). And then there are two tasks related to a map: something
with temperature, and again a script. {: .solution} {: .challenge}</p>
</blockquote>
</blockquote>
</section><section><h2 class="section-heading" id="examining-the-recipe-file">Examining the recipe file<a class="anchor" aria-label="anchor" href="#examining-the-recipe-file"></a></h2>
<hr class="half-width"><p>To get more insight into what is happening, we will have a look at
the recipe file itself. Use the following command to copy the recipe to
your working directory</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="ex">esmvaltool</span> recipes get examples/recipe_python.yml</span></code></pre>
</div>
<p>Now you should see the recipe file in your working directory (type
<code>ls</code> to verify). Use the <code>nano</code> editor to open
this file:</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="fu">nano</span> recipe_python.yml</span></code></pre>
</div>
<p>For reference, you can also view the recipe by unfolding the box
below.</p>
<blockquote>
<h2 id="recipe_python.yml">recipe_python.yml</h2>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">YAML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode yaml" tabindex="0"><code class="sourceCode yaml"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="co"># ESMValTool</span></span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a><span class="co"># recipe_python.yml</span></span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a><span class="co"># See https://docs.esmvaltool.org/en/latest/recipes/recipe_examples.html</span></span>
<span id="cb7-5"><a href="#cb7-5" tabindex="-1"></a><span class="co"># for a description of this recipe.</span></span>
<span id="cb7-6"><a href="#cb7-6" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb7-7"><a href="#cb7-7" tabindex="-1"></a><span class="co"># See https://docs.esmvaltool.org/projects/esmvalcore/en/latest/recipe/overview.html</span></span>
<span id="cb7-8"><a href="#cb7-8" tabindex="-1"></a><span class="co"># for a description of the recipe format.</span></span>
<span id="cb7-9"><a href="#cb7-9" tabindex="-1"></a><span class="pp">---</span></span>
<span id="cb7-10"><a href="#cb7-10" tabindex="-1"></a><span class="fu">documentation</span><span class="kw">:</span></span>
<span id="cb7-11"><a href="#cb7-11" tabindex="-1"></a><span class="fu"> description</span><span class="kw">: </span><span class="ch">|</span></span>
<span id="cb7-12"><a href="#cb7-12" tabindex="-1"></a>   Example recipe that plots a map and timeseries of temperature.</span>
<span id="cb7-13"><a href="#cb7-13" tabindex="-1"></a></span>
<span id="cb7-14"><a href="#cb7-14" tabindex="-1"></a><span class="at"> </span><span class="fu">title</span><span class="kw">:</span><span class="at"> Recipe that runs an example diagnostic written in Python.</span></span>
<span id="cb7-15"><a href="#cb7-15" tabindex="-1"></a></span>
<span id="cb7-16"><a href="#cb7-16" tabindex="-1"></a><span class="at"> </span><span class="fu">authors</span><span class="kw">:</span></span>
<span id="cb7-17"><a href="#cb7-17" tabindex="-1"></a><span class="at">   </span><span class="kw">-</span><span class="at"> andela_bouwe</span></span>
<span id="cb7-18"><a href="#cb7-18" tabindex="-1"></a><span class="at">   </span><span class="kw">-</span><span class="at"> righi_mattia</span></span>
<span id="cb7-19"><a href="#cb7-19" tabindex="-1"></a></span>
<span id="cb7-20"><a href="#cb7-20" tabindex="-1"></a><span class="at"> </span><span class="fu">maintainer</span><span class="kw">:</span></span>
<span id="cb7-21"><a href="#cb7-21" tabindex="-1"></a><span class="at">   </span><span class="kw">-</span><span class="at"> schlund_manuel</span></span>
<span id="cb7-22"><a href="#cb7-22" tabindex="-1"></a></span>
<span id="cb7-23"><a href="#cb7-23" tabindex="-1"></a><span class="at"> </span><span class="fu">references</span><span class="kw">:</span></span>
<span id="cb7-24"><a href="#cb7-24" tabindex="-1"></a><span class="at">   </span><span class="kw">-</span><span class="at"> acknow_project</span></span>
<span id="cb7-25"><a href="#cb7-25" tabindex="-1"></a></span>
<span id="cb7-26"><a href="#cb7-26" tabindex="-1"></a><span class="at"> </span><span class="fu">projects</span><span class="kw">:</span></span>
<span id="cb7-27"><a href="#cb7-27" tabindex="-1"></a><span class="at">   </span><span class="kw">-</span><span class="at"> esmval</span></span>
<span id="cb7-28"><a href="#cb7-28" tabindex="-1"></a><span class="at">   </span><span class="kw">-</span><span class="at"> c3s-magic</span></span>
<span id="cb7-29"><a href="#cb7-29" tabindex="-1"></a></span>
<span id="cb7-30"><a href="#cb7-30" tabindex="-1"></a><span class="fu">datasets</span><span class="kw">:</span></span>
<span id="cb7-31"><a href="#cb7-31" tabindex="-1"></a><span class="at"> </span><span class="kw">-</span><span class="at"> </span><span class="kw">{</span><span class="fu">dataset</span><span class="kw">:</span><span class="at"> BCC-ESM1</span><span class="kw">,</span><span class="at"> </span><span class="fu">project</span><span class="kw">:</span><span class="at"> CMIP6</span><span class="kw">,</span><span class="at"> </span><span class="fu">exp</span><span class="kw">:</span><span class="at"> historical</span><span class="kw">,</span><span class="at"> </span><span class="fu">ensemble</span><span class="kw">:</span><span class="at"> r1i1p1f1</span><span class="kw">,</span><span class="at"> </span><span class="fu">grid</span><span class="kw">:</span><span class="at"> gn</span><span class="kw">}</span></span>
<span id="cb7-32"><a href="#cb7-32" tabindex="-1"></a><span class="at"> </span><span class="kw">-</span><span class="at"> </span><span class="kw">{</span><span class="fu">dataset</span><span class="kw">:</span><span class="at"> bcc-csm1-1</span><span class="kw">,</span><span class="at"> </span><span class="fu">project</span><span class="kw">:</span><span class="at"> CMIP5</span><span class="kw">,</span><span class="at"> </span><span class="fu">exp</span><span class="kw">:</span><span class="at"> historical</span><span class="kw">,</span><span class="at"> </span><span class="fu">ensemble</span><span class="kw">:</span><span class="at"> r1i1p1</span><span class="kw">}</span></span>
<span id="cb7-33"><a href="#cb7-33" tabindex="-1"></a></span>
<span id="cb7-34"><a href="#cb7-34" tabindex="-1"></a><span class="fu">preprocessors</span><span class="kw">:</span></span>
<span id="cb7-35"><a href="#cb7-35" tabindex="-1"></a><span class="co"> # See https://docs.esmvaltool.org/projects/esmvalcore/en/latest/recipe/preprocessor.html</span></span>
<span id="cb7-36"><a href="#cb7-36" tabindex="-1"></a><span class="co"> # for a description of the preprocessor functions.</span></span>
<span id="cb7-37"><a href="#cb7-37" tabindex="-1"></a></span>
<span id="cb7-38"><a href="#cb7-38" tabindex="-1"></a><span class="at"> </span><span class="fu">to_degrees_c</span><span class="kw">:</span></span>
<span id="cb7-39"><a href="#cb7-39" tabindex="-1"></a><span class="at">   </span><span class="fu">convert_units</span><span class="kw">:</span></span>
<span id="cb7-40"><a href="#cb7-40" tabindex="-1"></a><span class="at">     </span><span class="fu">units</span><span class="kw">:</span><span class="at"> degrees_C</span></span>
<span id="cb7-41"><a href="#cb7-41" tabindex="-1"></a></span>
<span id="cb7-42"><a href="#cb7-42" tabindex="-1"></a><span class="at"> </span><span class="fu">annual_mean_amsterdam</span><span class="kw">:</span></span>
<span id="cb7-43"><a href="#cb7-43" tabindex="-1"></a><span class="at">   </span><span class="fu">extract_location</span><span class="kw">:</span></span>
<span id="cb7-44"><a href="#cb7-44" tabindex="-1"></a><span class="at">     </span><span class="fu">location</span><span class="kw">:</span><span class="at"> Amsterdam</span></span>
<span id="cb7-45"><a href="#cb7-45" tabindex="-1"></a><span class="at">     </span><span class="fu">scheme</span><span class="kw">:</span><span class="at"> linear</span></span>
<span id="cb7-46"><a href="#cb7-46" tabindex="-1"></a><span class="at">   </span><span class="fu">annual_statistics</span><span class="kw">:</span></span>
<span id="cb7-47"><a href="#cb7-47" tabindex="-1"></a><span class="at">     </span><span class="fu">operator</span><span class="kw">:</span><span class="at"> mean</span></span>
<span id="cb7-48"><a href="#cb7-48" tabindex="-1"></a><span class="at">   </span><span class="fu">multi_model_statistics</span><span class="kw">:</span></span>
<span id="cb7-49"><a href="#cb7-49" tabindex="-1"></a><span class="at">     </span><span class="fu">statistics</span><span class="kw">:</span></span>
<span id="cb7-50"><a href="#cb7-50" tabindex="-1"></a><span class="at">       </span><span class="kw">-</span><span class="at"> mean</span></span>
<span id="cb7-51"><a href="#cb7-51" tabindex="-1"></a><span class="at">     </span><span class="fu">span</span><span class="kw">:</span><span class="at"> overlap</span></span>
<span id="cb7-52"><a href="#cb7-52" tabindex="-1"></a><span class="at">   </span><span class="fu">convert_units</span><span class="kw">:</span></span>
<span id="cb7-53"><a href="#cb7-53" tabindex="-1"></a><span class="at">     </span><span class="fu">units</span><span class="kw">:</span><span class="at"> degrees_C</span></span>
<span id="cb7-54"><a href="#cb7-54" tabindex="-1"></a></span>
<span id="cb7-55"><a href="#cb7-55" tabindex="-1"></a><span class="at"> </span><span class="fu">annual_mean_global</span><span class="kw">:</span></span>
<span id="cb7-56"><a href="#cb7-56" tabindex="-1"></a><span class="at">   </span><span class="fu">area_statistics</span><span class="kw">:</span></span>
<span id="cb7-57"><a href="#cb7-57" tabindex="-1"></a><span class="at">     </span><span class="fu">operator</span><span class="kw">:</span><span class="at"> mean</span></span>
<span id="cb7-58"><a href="#cb7-58" tabindex="-1"></a><span class="at">   </span><span class="fu">annual_statistics</span><span class="kw">:</span></span>
<span id="cb7-59"><a href="#cb7-59" tabindex="-1"></a><span class="at">     </span><span class="fu">operator</span><span class="kw">:</span><span class="at"> mean</span></span>
<span id="cb7-60"><a href="#cb7-60" tabindex="-1"></a><span class="at">   </span><span class="fu">convert_units</span><span class="kw">:</span></span>
<span id="cb7-61"><a href="#cb7-61" tabindex="-1"></a><span class="at">     </span><span class="fu">units</span><span class="kw">:</span><span class="at"> degrees_C</span></span>
<span id="cb7-62"><a href="#cb7-62" tabindex="-1"></a></span>
<span id="cb7-63"><a href="#cb7-63" tabindex="-1"></a><span class="fu">diagnostics</span><span class="kw">:</span></span>
<span id="cb7-64"><a href="#cb7-64" tabindex="-1"></a></span>
<span id="cb7-65"><a href="#cb7-65" tabindex="-1"></a><span class="at"> </span><span class="fu">map</span><span class="kw">:</span></span>
<span id="cb7-66"><a href="#cb7-66" tabindex="-1"></a><span class="at">   </span><span class="fu">description</span><span class="kw">:</span><span class="at"> Global map of temperature in January 2000.</span></span>
<span id="cb7-67"><a href="#cb7-67" tabindex="-1"></a><span class="at">   </span><span class="fu">themes</span><span class="kw">:</span></span>
<span id="cb7-68"><a href="#cb7-68" tabindex="-1"></a><span class="at">     </span><span class="kw">-</span><span class="at"> phys</span></span>
<span id="cb7-69"><a href="#cb7-69" tabindex="-1"></a><span class="at">   </span><span class="fu">realms</span><span class="kw">:</span></span>
<span id="cb7-70"><a href="#cb7-70" tabindex="-1"></a><span class="at">     </span><span class="kw">-</span><span class="at"> atmos</span></span>
<span id="cb7-71"><a href="#cb7-71" tabindex="-1"></a><span class="at">   </span><span class="fu">variables</span><span class="kw">:</span></span>
<span id="cb7-72"><a href="#cb7-72" tabindex="-1"></a><span class="at">     </span><span class="fu">tas</span><span class="kw">:</span></span>
<span id="cb7-73"><a href="#cb7-73" tabindex="-1"></a><span class="at">       </span><span class="fu">mip</span><span class="kw">:</span><span class="at"> Amon</span></span>
<span id="cb7-74"><a href="#cb7-74" tabindex="-1"></a><span class="at">       </span><span class="fu">preprocessor</span><span class="kw">:</span><span class="at"> to_degrees_c</span></span>
<span id="cb7-75"><a href="#cb7-75" tabindex="-1"></a><span class="at">       </span><span class="fu">timerange</span><span class="kw">:</span><span class="at"> 2000/P1M</span></span>
<span id="cb7-76"><a href="#cb7-76" tabindex="-1"></a><span class="fu">       caption</span><span class="kw">: </span><span class="ch">|</span></span>
<span id="cb7-77"><a href="#cb7-77" tabindex="-1"></a>         Global map of {long_name} in January 2000 according to {dataset}.</span>
<span id="cb7-78"><a href="#cb7-78" tabindex="-1"></a><span class="at">   </span><span class="fu">scripts</span><span class="kw">:</span></span>
<span id="cb7-79"><a href="#cb7-79" tabindex="-1"></a><span class="at">     </span><span class="fu">script1</span><span class="kw">:</span></span>
<span id="cb7-80"><a href="#cb7-80" tabindex="-1"></a><span class="at">       </span><span class="fu">script</span><span class="kw">:</span><span class="at"> examples/diagnostic.py</span></span>
<span id="cb7-81"><a href="#cb7-81" tabindex="-1"></a><span class="at">       </span><span class="fu">quickplot</span><span class="kw">:</span></span>
<span id="cb7-82"><a href="#cb7-82" tabindex="-1"></a><span class="at">         </span><span class="fu">plot_type</span><span class="kw">:</span><span class="at"> pcolormesh</span></span>
<span id="cb7-83"><a href="#cb7-83" tabindex="-1"></a><span class="at">         </span><span class="fu">cmap</span><span class="kw">:</span><span class="at"> Reds</span></span>
<span id="cb7-84"><a href="#cb7-84" tabindex="-1"></a></span>
<span id="cb7-85"><a href="#cb7-85" tabindex="-1"></a><span class="at"> </span><span class="fu">timeseries</span><span class="kw">:</span></span>
<span id="cb7-86"><a href="#cb7-86" tabindex="-1"></a><span class="at">   </span><span class="fu">description</span><span class="kw">:</span><span class="at"> Annual mean temperature in Amsterdam and global mean since 1850.</span></span>
<span id="cb7-87"><a href="#cb7-87" tabindex="-1"></a><span class="at">   </span><span class="fu">themes</span><span class="kw">:</span></span>
<span id="cb7-88"><a href="#cb7-88" tabindex="-1"></a><span class="at">     </span><span class="kw">-</span><span class="at"> phys</span></span>
<span id="cb7-89"><a href="#cb7-89" tabindex="-1"></a><span class="at">   </span><span class="fu">realms</span><span class="kw">:</span></span>
<span id="cb7-90"><a href="#cb7-90" tabindex="-1"></a><span class="at">     </span><span class="kw">-</span><span class="at"> atmos</span></span>
<span id="cb7-91"><a href="#cb7-91" tabindex="-1"></a><span class="at">   </span><span class="fu">variables</span><span class="kw">:</span></span>
<span id="cb7-92"><a href="#cb7-92" tabindex="-1"></a><span class="at">     </span><span class="fu">tas_amsterdam</span><span class="kw">:</span></span>
<span id="cb7-93"><a href="#cb7-93" tabindex="-1"></a><span class="at">       </span><span class="fu">short_name</span><span class="kw">:</span><span class="at"> tas</span></span>
<span id="cb7-94"><a href="#cb7-94" tabindex="-1"></a><span class="at">       </span><span class="fu">mip</span><span class="kw">:</span><span class="at"> Amon</span></span>
<span id="cb7-95"><a href="#cb7-95" tabindex="-1"></a><span class="at">       </span><span class="fu">preprocessor</span><span class="kw">:</span><span class="at"> annual_mean_amsterdam</span></span>
<span id="cb7-96"><a href="#cb7-96" tabindex="-1"></a><span class="at">       </span><span class="fu">timerange</span><span class="kw">:</span><span class="at"> 1850/2000</span></span>
<span id="cb7-97"><a href="#cb7-97" tabindex="-1"></a><span class="at">       </span><span class="fu">caption</span><span class="kw">:</span><span class="at"> Annual mean {long_name} in Amsterdam according to {dataset}.</span></span>
<span id="cb7-98"><a href="#cb7-98" tabindex="-1"></a><span class="at">     </span><span class="fu">tas_global</span><span class="kw">:</span></span>
<span id="cb7-99"><a href="#cb7-99" tabindex="-1"></a><span class="at">       </span><span class="fu">short_name</span><span class="kw">:</span><span class="at"> tas</span></span>
<span id="cb7-100"><a href="#cb7-100" tabindex="-1"></a><span class="at">       </span><span class="fu">mip</span><span class="kw">:</span><span class="at"> Amon</span></span>
<span id="cb7-101"><a href="#cb7-101" tabindex="-1"></a><span class="at">       </span><span class="fu">preprocessor</span><span class="kw">:</span><span class="at"> annual_mean_global</span></span>
<span id="cb7-102"><a href="#cb7-102" tabindex="-1"></a><span class="at">       </span><span class="fu">timerange</span><span class="kw">:</span><span class="at"> 1850/2000</span></span>
<span id="cb7-103"><a href="#cb7-103" tabindex="-1"></a><span class="at">       </span><span class="fu">caption</span><span class="kw">:</span><span class="at"> Annual global mean {long_name} according to {dataset}.</span></span>
<span id="cb7-104"><a href="#cb7-104" tabindex="-1"></a><span class="at">   </span><span class="fu">scripts</span><span class="kw">:</span></span>
<span id="cb7-105"><a href="#cb7-105" tabindex="-1"></a><span class="at">     </span><span class="fu">script1</span><span class="kw">:</span></span>
<span id="cb7-106"><a href="#cb7-106" tabindex="-1"></a><span class="at">       </span><span class="fu">script</span><span class="kw">:</span><span class="at"> examples/diagnostic.py</span></span>
<span id="cb7-107"><a href="#cb7-107" tabindex="-1"></a><span class="at">       </span><span class="fu">quickplot</span><span class="kw">:</span></span>
<span id="cb7-108"><a href="#cb7-108" tabindex="-1"></a><span class="at">         </span><span class="fu">plot_type</span><span class="kw">:</span><span class="at"> plot</span></span></code></pre>
</div>
<p>{: .solution}</p>
</blockquote>
<p>Do you recognize the basic recipe structure that was introduced in
episode 1?</p>
<ul><li>
<strong>Documentation</strong> with relevant (citation)
information</li>
<li>
<strong>Datasets</strong> that should be analysed</li>
<li>
<strong>Preprocessors</strong> groups of common preprocessing
steps</li>
<li>
<strong>Diagnostics</strong> scripts performing more specific
evaluation steps</li>
</ul><blockquote>
<h2 id="analyse-the-recipe">Analyse the recipe</h2>
<p>Try to answer the following questions:</p>
<ol style="list-style-type: decimal"><li>Who wrote this recipe?</li>
<li>Who should be approached if there is a problem with this
recipe?</li>
<li>How many datasets are analyzed?</li>
<li>What does the preprocessor called <code>annual_mean_global</code>
do?</li>
<li>Which script is applied for the diagnostic called
<code>map</code>?</li>
<li>Can you link specific lines in the recipe to the tasks that we saw
before?</li>
<li>How is the location of the city specified?</li>
<li>How is the temporal range of the data specified?</li>
</ol><blockquote>
<h2 id="answers-1">Answers</h2>
<ol style="list-style-type: decimal"><li>The example recipe is written by Bouwe Andela and Mattia Righi.</li>
<li>Manuel Schlund is listed as the maintainer of this recipe.</li>
<li>Two datasets are analysed:
<ul><li>CMIP6 data from the model BCC-ESM1</li>
<li>CMIP5 data from the model bcc-csm1-1</li>
</ul></li>
<li>The preprocessor <code>annual_mean_global</code> computes an area
mean as well as annual means</li>
<li>The diagnostic called <code>map</code> executes a script referred to
as <code>script1</code>. This is a python script named
<code>examples/diagnostic.py</code>
</li>
<li>There are two diagnostics: <code>map</code> and
<code>timeseries</code>. Under the diagnostic <code>map</code> we find
two tasks:
<ul><li>a preprocessor task called <code>tas</code>, applying the
preprocessor called <code>to_degrees_c</code> to the variable
<code>tas</code>.</li>
<li>a diagnostic task called <code>script1</code>, applying the script
<code>examples/diagnostic.py</code> to the preprocessed data
(<code>map/tas</code>).</li>
</ul>
Under the diagnostic <code>timeseries</code> we find three tasks:
<ul><li>a preprocessor task called <code>tas_amsterdam</code>, applying the
preprocessor called <code>annual_mean_amsterdam</code> to the variable
<code>tas</code>.</li>
<li>a preprocessor task called <code>tas_global</code>, applying the
preprocessor called <code>annual_mean_global</code> to the variable
<code>tas</code>.</li>
<li>a diagnostic task called <code>script1</code>, applying the script
<code>examples/diagnostic.py</code> to the preprocessed data
(<code>timeseries/tas_global</code> and
<code>timeseries/tas_amsterdam</code>).</li>
</ul></li>
<li>The <code>extract_location</code> preprocessor is used to get data
for a specific location here. ESMValTool interpolates to the location
based on the chosen scheme. Can you tell the scheme used here? For more
ways to extract areas, see the [Area
operations][preproc-area-manipulation] page.</li>
<li>The <code>timerange</code> tag is used to extract data from a
specific time period here. The start time is <code>01/01/2000</code> and
the span of time to calculate means is <code>1 Month</code> given by
<code>P1M</code>. For more options on how to specify time ranges, see
the [timerange documentation][timeranges]. {: .solution} {:
.challenge}</li>
</ol></blockquote>
</blockquote>
<blockquote>
<h2 id="pro-tip-short-names-and-variable-groups">Pro tip: short names
and variable groups</h2>
<p>The preprocessor tasks in ESMValTool are called ‘variable groups’.
For the diagnostic <code>timeseries</code>, we have two variable groups:
<code>tas_amsterdam</code> and <code>tas_global</code>. Both of them
operate on the variable <code>tas</code> (as indicated by the
<code>short_name</code>), but they apply different preprocessors. For
the diagnostic <code>map</code> the variable group itself is named
<code>tas</code>, and you’ll notice that we do not explicitly provide
the <code>short_name</code>. This is a shorthand built into ESMValTool.
{: .callout}</p>
</blockquote>
<blockquote>
<h2 id="output-files">Output files</h2>
<p>Have another look at the output directory created by the ESMValTool
run.</p>
<p>Which files/folders are created by each task?</p>
<blockquote>
<h2 id="answer-1">Answer</h2>
<ul><li>
<strong>map/tas</strong>: creates <code>/preproc/map/tas</code>,
which contains preprocessed data for each of the input datasets, a file
called <code>metadata.yml</code> describing the contents of these
datasets and provenance information in the form of <code>.xml</code>
files.</li>
<li>
<strong>timeseries/tas_global</strong>: creates
<code>/preproc/timeseries/tas_global</code>, which contains preprocessed
data for each of the input datasets, a <code>metadata.yml</code> file
and provenance information in the form of <code>.xml</code> files.</li>
<li>
<strong>timeseries/tas_amsterdam</strong>: creates
<code>/preproc/timeseries/tas_amsterdam</code>, which contains
preprocessed data for each of the input datasets, plus a combined
<code>MultiModelMean</code>, a <code>metadata.yml</code> file and
provenance files.</li>
<li>
<strong>map/script1</strong>: creates <code>/run/map/script1</code>
with general information and a log of the diagnostic script run. It also
creates <code>/plots/map/script1/</code> and
<code>/work/map/script1</code>, which contain output figures and output
datasets, respectively. For each output file, there is also
corresponding provenance information in the form of <code>.xml</code>,
<code>.bibtex</code> and <code>.txt</code> files.</li>
<li>
<strong>timeseries/script1</strong>: creates
<code>/run/timeseries/script1</code> with general information and a log
of the diagnostic script run. It also creates
<code>/plots/timeseries/script1</code> and
<code>/work/timeseries/script1</code>, which contain output figures and
output datasets, respectively. For each output file, there is also
corresponding provenance information in the form of <code>.xml</code>,
<code>.bibtex</code> and <code>.txt</code> files.</li>
</ul><p>{: .solution} {: .challenge}</p>
</blockquote>
</blockquote>
<blockquote>
<h2 id="pro-tip-diagnostic-logs">Pro tip: diagnostic logs</h2>
<p>When you run ESMValTool, any log messages from the diagnostic script
are not printed on the terminal. But they are written to the
<code>log.txt</code> files in the folder
<code>/run/&lt;diag_name&gt;/log.txt</code>.</p>
<p>ESMValTool <em>does</em> print a command that can be used to re-run a
diagnostic script. When you use this the output <em>will</em> be printed
to the command line. {: .callout}</p>
</blockquote>
</section><section><h2 class="section-heading" id="modifying-the-example-recipe">Modifying the example recipe<a class="anchor" aria-label="anchor" href="#modifying-the-example-recipe"></a></h2>
<hr class="half-width"><p>Let’s make a small modification to the example recipe. Notice that
now that you have copied and edited the recipe, you can use</p>
<pre><code>esmvaltool run recipe_python.yml</code></pre>
<p>to refer to your local file rather than the default version shipped
with ESMValTool.</p>
<blockquote>
<h2 id="change-your-location">Change your location</h2>
<p>Modify and run the recipe to analyse the temperature for your own
location.</p>
<blockquote>
<h2 id="solution">Solution</h2>
<p>In principle, you only have to modify the location in the
preprocessor called <code>annual_mean_amsterdam</code>. However, it is
good practice to also replace all instances of <code>amsterdam</code>
with the correct name of your location. Otherwise the log messages and
output will be confusing. You are free to modify the names of
preprocessors or diagnostics.</p>
<p>In the <code>diff</code> file below you will see the changes we have
made to the file. The top 2 lines are the filenames and the lines like
<code>@@ -39,9 +39,9 @@</code> represent the line numbers in the
original and modified file, respectively. For more info on this format,
see <a href="https://en.wikipedia.org/wiki/Diff#Unified_format" class="external-link">here</a>.</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">DIFF<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode diff" tabindex="0"><code class="sourceCode diff"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="kw">--- recipe_python.yml	</span></span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a><span class="dt">+++ recipe_python_london.yml	</span></span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a><span class="dt">@@ -39,9 +39,9 @@</span></span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a>    convert_units:</span>
<span id="cb9-5"><a href="#cb9-5" tabindex="-1"></a>      units: degrees_C</span>
<span id="cb9-6"><a href="#cb9-6" tabindex="-1"></a></span>
<span id="cb9-7"><a href="#cb9-7" tabindex="-1"></a><span class="st">-  annual_mean_amsterdam:</span></span>
<span id="cb9-8"><a href="#cb9-8" tabindex="-1"></a><span class="va">+  annual_mean_london:</span></span>
<span id="cb9-9"><a href="#cb9-9" tabindex="-1"></a>    extract_location:</span>
<span id="cb9-10"><a href="#cb9-10" tabindex="-1"></a><span class="st">-      location: Amsterdam</span></span>
<span id="cb9-11"><a href="#cb9-11" tabindex="-1"></a><span class="va">+      location: London</span></span>
<span id="cb9-12"><a href="#cb9-12" tabindex="-1"></a>      scheme: linear</span>
<span id="cb9-13"><a href="#cb9-13" tabindex="-1"></a>    annual_statistics:</span>
<span id="cb9-14"><a href="#cb9-14" tabindex="-1"></a>      operator: mean</span>
<span id="cb9-15"><a href="#cb9-15" tabindex="-1"></a><span class="dt">@@ -83,7 +83,7 @@</span></span>
<span id="cb9-16"><a href="#cb9-16" tabindex="-1"></a>          cmap: Reds</span>
<span id="cb9-17"><a href="#cb9-17" tabindex="-1"></a></span>
<span id="cb9-18"><a href="#cb9-18" tabindex="-1"></a>  timeseries:</span>
<span id="cb9-19"><a href="#cb9-19" tabindex="-1"></a><span class="st">-    description: Annual mean temperature in Amsterdam and global mean since 1850.</span></span>
<span id="cb9-20"><a href="#cb9-20" tabindex="-1"></a><span class="va">+    description: Annual mean temperature in London and global mean since 1850.</span></span>
<span id="cb9-21"><a href="#cb9-21" tabindex="-1"></a>    themes:</span>
<span id="cb9-22"><a href="#cb9-22" tabindex="-1"></a>      - phys</span>
<span id="cb9-23"><a href="#cb9-23" tabindex="-1"></a>    realms:</span>
<span id="cb9-24"><a href="#cb9-24" tabindex="-1"></a><span class="dt">@@ -92,9 +92,9 @@</span></span>
<span id="cb9-25"><a href="#cb9-25" tabindex="-1"></a>      tas_amsterdam:</span>
<span id="cb9-26"><a href="#cb9-26" tabindex="-1"></a>        short_name: tas</span>
<span id="cb9-27"><a href="#cb9-27" tabindex="-1"></a>        mip: Amon</span>
<span id="cb9-28"><a href="#cb9-28" tabindex="-1"></a><span class="st">-        preprocessor: annual_mean_amsterdam</span></span>
<span id="cb9-29"><a href="#cb9-29" tabindex="-1"></a><span class="va">+        preprocessor: annual_mean_london</span></span>
<span id="cb9-30"><a href="#cb9-30" tabindex="-1"></a>        timerange: 1850/2000</span>
<span id="cb9-31"><a href="#cb9-31" tabindex="-1"></a><span class="st">-        caption: Annual mean {long_name} in Amsterdam according to {dataset}.</span></span>
<span id="cb9-32"><a href="#cb9-32" tabindex="-1"></a><span class="va">+        caption: Annual mean {long_name} in London according to {dataset}.</span></span>
<span id="cb9-33"><a href="#cb9-33" tabindex="-1"></a>      tas_global:</span>
<span id="cb9-34"><a href="#cb9-34" tabindex="-1"></a>        short_name: tas</span>
<span id="cb9-35"><a href="#cb9-35" tabindex="-1"></a>        mip: Amon</span></code></pre>
</div>
<p>{: .solution} {: .challenge}</p>
</blockquote>
</blockquote>
<p>{% include links.md %}</p>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></div> <!-- / div.lesson-content -->
    </main><!-- / main#main-content.main-content --><nav class="bottom-pagination mx-md-4" aria-label="Previous and Next Chapter"><div class="d-block d-sm-block d-md-none">
        <a class="chapter-link" href="03-configuration.html"><i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>Previous</a>
        <a class="chapter-link float-end" href="05-conclusions.html">Next<i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i></a>
      </div>
      <!-- content for large screens -->
      <div class="d-none d-sm-none d-md-block">
        <a class="chapter-link" href="03-configuration.html" rel="prev">
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>
          Previous: Configuration
        </a>
        <a class="chapter-link float-end" href="05-conclusions.html" rel="next">
          Next: Conclusion of the...
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i>
        </a>
      </div>
    </nav></div> <!-- / div.primary-content.col-xs-12 -->
<!-- END:   inst/pkgdown/templates/content-instructor.html-->

      </div><!--/div.row-->
      		<footer class="row footer mx-md-3"><hr><div class="col-md-6">
        <p>This lesson is subject to the <a href="CODE_OF_CONDUCT.html">Code of Conduct</a></p>
        <p>

        <a href="https://github.com/ehogan/ESMValTool_Tutorial/edit/main/episodes/04-recipe.md" class="external-link">Edit on GitHub</a>

	
        | <a href="https://github.com/ehogan/ESMValTool_Tutorial/blob/main/CONTRIBUTING.md" class="external-link">Contributing</a>
        | <a href="https://github.com/ehogan/ESMValTool_Tutorial/" class="external-link">Source</a></p>
				<p><a href="https://github.com/ehogan/ESMValTool_Tutorial/blob/main/CITATION.cff" class="external-link">Cite</a> | <a href="mailto:team@carpentries.org">Contact</a> | <a href="https://carpentries.org/about/" class="external-link">About</a></p>
			</div>
			<div class="col-md-6">

        <p>Materials licensed under <a href="LICENSE.html">CC-BY 4.0</a> by the authors</p>

        <p>Template licensed under <a href="https://creativecommons.org/licenses/by-sa/4.0/" class="external-link">CC-BY 4.0</a> by <a href="https://carpentries.org/" class="external-link">The Carpentries</a></p>
        <p>Built with <a href="https://github.com/carpentries/sandpaper/tree/0.16.10" class="external-link">sandpaper (0.16.10)</a>, <a href="https://github.com/carpentries/pegboard/tree/0.7.7" class="external-link">pegboard (0.7.7)</a>, and <a href="https://github.com/carpentries/varnish/tree/1.0.5" class="external-link">varnish (1.0.5)</a></p>
			</div>
		</footer></div> <!-- / div.container -->
	<div id="to-top">
		<a href="#top">
      <i class="search-icon" data-feather="arrow-up" role="img" aria-label="Back To Top"></i><br><!-- <span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top --><span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top
		</a>
	</div>
  <script type="application/ld+json">
    {
  "@context": "https://schema.org",
  "@type": "TrainingMaterial",
  "@id": "https://ehogan.github.io/ESMValTool_Tutorial/04-recipe.html",
  "inLanguage": "en",
  "dct:conformsTo": "https://bioschemas.org/profiles/TrainingMaterial/1.0-RELEASE",
  "description": "A Carpentries Lesson teaching foundational data and coding skills to researchers worldwide",
  "keywords": "software, data, lesson, The Carpentries",
  "name": "Running your first recipe",
  "creativeWorkStatus": "active",
  "url": "https://ehogan.github.io/ESMValTool_Tutorial/04-recipe.html",
  "identifier": "https://ehogan.github.io/ESMValTool_Tutorial/04-recipe.html",
  "dateCreated": "2024-11-21",
  "dateModified": "2024-11-21",
  "datePublished": "2024-12-10"
}

  </script><script>
		feather.replace();
	</script></body></html><!-- END:   inst/pkgdown/templates/layout.html-->

